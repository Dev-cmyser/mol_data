<!DOCTYPE html>
<html>

 <head>

  <meta charset="utf-8"/>
<title>Exported Data</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>

  <link href="css/style.css" rel="stylesheet"/>

  <script src="js/script.js" type="text/javascript">

  </script>

 </head>

 <body onload="CheckLocation();">

  <div class="page_wrap">

   <div class="page_header">

    <div class="content">

     <div class="text bold">
$mol: Разработка 
     </div>

    </div>

   </div>

   <div class="page_body chat_page">

    <div class="history">

     <a class="pagination block_link" href="messages22.html">
Previous messages
     </a>

     <div class="message service" id="message-410">

      <div class="body details">
26 October 2018
      </div>

     </div>

     <div class="message default clearfix" id="message22137">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:45:07 UTC+03:00">
10:45
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ошибся на порядок, да
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22138">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:45:25 UTC+03:00">
10:45
       </div>

       <div class="text">
в любом случае фигня по-моему
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22139">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:45:25 UTC+03:00">
10:45
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="messages22.html#go_to_message22129">this message</a>
       </div>

       <div class="text">
Раза в 2 медленней: <a href="https://developers.google.com/web/updates/2018/05/bigint">https://developers.google.com/web/updates/2018/05/bigint</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22140">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:45:33 UTC+03:00">
10:45
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
с памятью то хрен с ним, гц не хотелось бы грузить
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22141">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:46:03 UTC+03:00">
10:46
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а зачем, со свапом массивов вроде норм
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22142">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:47:16 UTC+03:00">
10:47
       </div>

       <div class="text">
чаще всего будет влезать в свежий массив без релоков
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22143">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:47:53 UTC+03:00">
10:47
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну так, да, мы же этот вариант сейчас и обсуждаем
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22144">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:48:08 UTC+03:00">
10:48
       </div>

       <div class="text">
просто памяти на каждый атом понадобится больше
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22145">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:48:18 UTC+03:00">
10:48
       </div>

       <div class="text">
и для гц лишняя нагрузка
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22146">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:48:44 UTC+03:00">
10:48
       </div>

       <div class="text">
по сути атом будет представлять из себя 4 объекта<br>сам атом, мастера, вторые мастера, слейвы
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22147">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:50:05 UTC+03:00">
10:50
       </div>

       <div class="text">
можно даже сэкономить, и хранить мастера и слейвы в одном массиве
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22148">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:50:21 UTC+03:00">
10:50
       </div>

       <div class="text">
да че уж там, вообще все можно хранить в одном массиве))
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22149">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:50:39 UTC+03:00">
10:50
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
дольше надо будет итерироваться
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22150">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:50:41 UTC+03:00">
10:50
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Можно свой аллокатор памяти запилить.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22151">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:50:43 UTC+03:00">
10:50
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
[value, status, mastersCount, ...masters, ...slaves]
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22152">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:51:10 UTC+03:00">
10:51
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22149" onclick="return GoToMessage(22149)">this message</a>
       </div>

       <div class="text">
да нет, итерироваться не надо лишний раз
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22153">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:51:29 UTC+03:00">
10:51
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22151" onclick="return GoToMessage(22151)">this message</a>
       </div>

       <div class="text">
Двигать всех слейвов при добавлении мастера - расточительно.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22154">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:51:48 UTC+03:00">
10:51
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22146" onclick="return GoToMessage(22146)">this message</a>
       </div>

       <div class="text">
Можно и без вторых мастеров.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22155">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:52:15 UTC+03:00">
10:52
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
можно пул атомов держать и не грохать их жестко в destructor, а сбрасывать им массивы и отправлять обратно в пул
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22156">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:52:34 UTC+03:00">
10:52
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22153" onclick="return GoToMessage(22153)">this message</a>
       </div>

       <div class="text">
двигаем только первый слейв вконец, на его место ставим новый мастер
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22157">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:53:37 UTC+03:00">
10:53
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
при добавлении мастера - слев в конец сдвигаем чтоль и наоборот?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22158">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:54:56 UTC+03:00">
10:54
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
[m1, m2, s1, s2] добавляем новый мастер  m3 -&gt; <br>[m1, m2, s1, s2] -&gt;[m1, m2, null, s2, s1] -&gt;  [m1, m2, m3, s2, s1]
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22159">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 10:56:52 UTC+03:00">
10:56
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22155" onclick="return GoToMessage(22155)">this message</a>
       </div>

       <div class="text">
я пробовал уже так, выходит чуть дороже чем каждый раз с нуля создавать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22160">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:07:42 UTC+03:00">
11:07
       </div>

       <div class="text">
атом с 5 мастерами, и 5 слейвами <br><br>-&gt; если юзать двойные мастера (6 полей атома - value, status, fn, masters, master2, slaves)<br>(32 + 6*8 + (32+5*8)*3) = 296 байт на каждый атом<br><br>-&gt; если юзать массив (4 поля - value, status, fn)<br>(32 + 4*8 + (5*8)*2) = 144 байт <br><br>больше чем в 2 раза экономия по памяти, и 1 объект вместо 4х
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22161">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:08:23 UTC+03:00">
11:08
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
value, status, fn зачем в массив прятать?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22162">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:08:44 UTC+03:00">
11:08
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну а какая разница?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22163">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:08:48 UTC+03:00">
11:08
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
что б в объекте под поле память не выделялась?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22164">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:08:58 UTC+03:00">
11:08
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
чтобы объект не создавать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22165">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:10:42 UTC+03:00">
11:10
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а, ты стейт отделил в массивm там еще error, dispose
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22166">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:12:07 UTC+03:00">
11:12
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну все поля которые есть в объекте перенес в массив
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22167">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:12:19 UTC+03:00">
11:12
       </div>

       <div class="text">
просто доступ будет к ним по индексу
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22168">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:13:13 UTC+03:00">
11:13
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а доступ по свойству не быстрее, чем по индексу?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22169">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:13:44 UTC+03:00">
11:13
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
одинаково, если обращаешься через число а не через переменную
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22170">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:14:03 UTC+03:00">
11:14
       </div>

       <div class="text">
atom[4]
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22171">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:17:08 UTC+03:00">
11:17
       </div>

       <div class="text">
неправильно посчитал, только что проверил, v8 выделяет под каждый новый массив минимум 19 элементов<br>соотвественно новый расчет<br>-&gt; если юзать двойные мастера (6 полей атома - value, status, fn, masters, master2, slaves)<br><br>(32 + 6*8 + (32+19*8)*3) = 632 байт на каждый атом<br><br>-&gt; если юзать массив (4 поля - value, status, fn)<br>(32 + 19*8) = 184 байт <br><br>разница в 3.5 раза по памяти
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22172">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:18:42 UTC+03:00">
11:18
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
По идее такой оптимизатор можно сделать, заодно и обфускатор
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22173">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:19:30 UTC+03:00">
11:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
у тебя же опен сорс, нафиг тебе это ))<br>а вот то что размер исходника уменьшиться от этого это гуд
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22174">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:20:29 UTC+03:00">
11:20
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
обфускатор - это побочный эффект, т.к. читать такое будет сложнее
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22175">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:21:54 UTC+03:00">
11:21
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
в тс можно завести const enum Props {Value=1, Status=2}<br>а потом читать так atom[Props.Value] <br>после компиляции тс подставит туда просто числа, будет: atom[1]
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22176">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:25:38 UTC+03:00">
11:25
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Отладкой этого заниматься одно удовольствие.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22177">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:27:24 UTC+03:00">
11:27
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
для отладки ничего не стоит заменить на нормальные имена const enum Props {Value=&apos;value&apos;, Status=&apos;status&apos;}
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22178">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:27:45 UTC+03:00">
11:27
       </div>

       <div class="media_wrap clearfix">

        <div class="media clearfix pull_left media_photo">

         <div class="fill pull_left">

         </div>

         <div class="body">

          <div class="title bold">
Photo
          </div>

          <div class="description">
Not included, change data exporting settings to download.
          </div>

          <div class="status details">
398×176, 12.5 KB
          </div>

         </div>

        </div>

       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22179">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:28:37 UTC+03:00">
11:28
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Я про замену объекта массивом. Впрочем, можно сделать наследника от Array с геттерами.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22180">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:30:02 UTC+03:00">
11:30
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так прям и писать в массив ключи текстовые
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22181">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:30:35 UTC+03:00">
11:30
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Глазами выискивать где заканчиваются мастера и начинаются слейвы - напряжно.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22182">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:31:19 UTC+03:00">
11:31
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
совсем ты зажрался, иди на ассемблере попрограммируй
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22183">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:32:26 UTC+03:00">
11:32
       </div>

       <div class="text">
с вебасмом как же быть тогда, там отдельную сборку придется делать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22184">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:33:00 UTC+03:00">
11:33
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22181" onclick="return GoToMessage(22181)">this message</a>
       </div>

       <div class="text">
можно делать элемент сепаратор которая визуально отделит мастера от слейвов
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22185">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:34:34 UTC+03:00">
11:34
       </div>

       <div class="media_wrap clearfix">

        <div class="media clearfix pull_left media_photo">

         <div class="fill pull_left">

         </div>

         <div class="body">

          <div class="title bold">
Photo
          </div>

          <div class="description">
Not included, change data exporting settings to download.
          </div>

          <div class="status details">
916×342, 29.1 KB
          </div>

         </div>

        </div>

       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22186">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:35:39 UTC+03:00">
11:35
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
и вообще по массиву расставлять комментарии
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22187">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:36:05 UTC+03:00">
11:36
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну либо да, отнаследовать класс от массива, и добавить ему геттеров
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22188">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:36:21 UTC+03:00">
11:36
       </div>

       <div class="text">
get slaves()<br>get master() <br>get status
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22189">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:38:29 UTC+03:00">
11:38
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Не будет ли создание унаследованного массива по производительности эквивалентно созданию объекта и обычного массива?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22190">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:38:59 UTC+03:00">
11:38
       </div>

       <div class="text">
Вообще интересная оптимизация, для файберов самое оно.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22191">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:41:54 UTC+03:00">
11:41
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так это только для девмода
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22192">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:42:09 UTC+03:00">
11:42
       </div>

       <div class="text">
в проде без этого будет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22193">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:55:12 UTC+03:00">
11:55
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Я не разделяю прод и дев.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22194">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:55:36 UTC+03:00">
11:55
       </div>

       <div class="text">
И на проде надо дебажить и в деве надо отлаживать то, что будет на проде, а не что-то своё.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22195">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:56:25 UTC+03:00">
11:56
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
тут изменения минимальны, можно рядом копию dev-держать для дебага, если уж важна оптимизация
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22196">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:56:34 UTC+03:00">
11:56
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Интересно, <code>Symbol.toStringTag</code> в отображении в консоли работает только если задан как поле, но не через геттер, прокси, <code>new String</code> или как либо ещё.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22197">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 11:57:39 UTC+03:00">
11:57
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22195" onclick="return GoToMessage(22195)">this message</a>
       </div>

       <div class="text">
Они всегда минимальны, а потом разъезжается в случайный момент. Для начала стоит выяснить есть ли вообще падение производительности.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22198">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:01:40 UTC+03:00">
12:01
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а добавление вообще чего либо к массиву, в объект его не превратит?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22199">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:02:48 UTC+03:00">
12:02
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
По идее не должно. У нас же просто прототип другой будет.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22200">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:10:05 UTC+03:00">
12:10
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
атомы пока можно masters/slave в одном попробовать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22201">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:11:04 UTC+03:00">
12:11
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
проверил class Arr extends Array{}<br>по производительности совсем не массив, раз в 10 медленнее
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22202">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:11:24 UTC+03:00">
12:11
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
вот-вот, он как мапка скорее всего
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22203">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:11:37 UTC+03:00">
12:11
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я бы даже сказал раз в 100
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22204">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:13:46 UTC+03:00">
12:13
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
с мастерами/слейвами алгоритм то в итоге какой самый оптимальный, я так и не понял?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22205">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:25:11 UTC+03:00">
12:25
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну самый оптимальный тот который я предлагал, но с ограничением глубины в 30, либо чуть медленнее вариант от мобх с двойными мастерами
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22206">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:43:38 UTC+03:00">
12:43
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
от mobx слейвы не оптимизирует
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22207">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:56:22 UTC+03:00">
12:56
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22201" onclick="return GoToMessage(22201)">this message</a>
       </div>

       <div class="text">
<a href="https://jsperf.com/argegate-vs-inherit-native-creation">https://jsperf.com/argegate-vs-inherit-native-creation</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22208">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:57:49 UTC+03:00">
12:57
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
странный бенч, надо цикл по 100 элементам хотя бы
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22209">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:58:29 UTC+03:00">
12:58
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
jsperf сам его делает.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22210">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:58:48 UTC+03:00">
12:58
       </div>

       <div class="text">
Или речь про for по массиву?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22211">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 12:58:55 UTC+03:00">
12:58
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ага
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22212">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:10:44 UTC+03:00">
13:10
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
<a href="https://jsperf.com/argegate-vs-inherit-native-rw">https://jsperf.com/argegate-vs-inherit-native-rw</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22213">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:11:59 UTC+03:00">
13:11
       </div>

       <div class="text">
В ФФ всё в точности наоборот - создание в 10 раз медленнее, а вот пуши одинаково.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22214">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:12:51 UTC+03:00">
13:12
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
еще через проксю можно попробовать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22215">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:13:27 UTC+03:00">
13:13
       </div>

       <div class="text">
ощущение, что унаследованный массив как объект работает и индексы в ключи  конвертятся
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22216">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:15:27 UTC+03:00">
13:15
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Прокси ни чем с отладкой не поможет.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22217">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:15:59 UTC+03:00">
13:15
       </div>

       <div class="text">
А есть более вменяемый альтернативы jsperf?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22218">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:16:41 UTC+03:00">
13:16
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
console.time =)
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22219">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:16:55 UTC+03:00">
13:16
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Его шарить неудобно.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22220">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:18:18 UTC+03:00">
13:18
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
фидл любой
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22221">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:26:24 UTC+03:00">
13:26
       </div>

       <div class="text">
<a href="https://esbench.com">https://esbench.com</a> я этим еще пользовался
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22222">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:29:04 UTC+03:00">
13:29
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Фидл разогрев не сделает, в циклы не завернёт, число итераций автоматически не завернёт, гистограмму не построит.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22223">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:29:31 UTC+03:00">
13:29
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
еще данные не сохранит для сравнения
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22224">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:31:55 UTC+03:00">
13:31
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Что-то все эти бенчи кривые до безобразия.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22225">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:32:31 UTC+03:00">
13:32
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
по-моему их умственно-отсталые делают, взглянуть хотя бы на историю jsperf
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22226">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:36:42 UTC+03:00">
13:36
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Я когда-то такой компонент делал: <a href="http://nin-jin.github.io/article/article_dev/article_dev.doc.xml">http://nin-jin.github.io/article/article_dev/article_dev.doc.xml</a><br>Редактирование сломалось правда, поэтому надо вручную добавлять <code>contenteditable=true</code> в <code>&lt;wc:editor&gt;</code>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22227">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 13:53:14 UTC+03:00">
13:53
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
с базой я только jsperf знаю
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22228">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 14:10:21 UTC+03:00">
14:10
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22207" onclick="return GoToMessage(22207)">this message</a>
       </div>

       <div class="text">
я делал создание и добавление 10, 20, 100, 1000 элементов и не внутри конструктора
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22229">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 14:12:47 UTC+03:00">
14:12
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Я стараюсь рассматривать худшие случаи.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22230">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 14:15:54 UTC+03:00">
14:15
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
так добавь в массив метки, делов то =)
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22231">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 14:16:11 UTC+03:00">
14:16
       </div>

       <div class="text">
зачем эти трюки с наследованием
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22232">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 14:44:46 UTC+03:00">
14:44
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22205" onclick="return GoToMessage(22205)">this message</a>
       </div>

       <div class="text">
нет это не самый оптимальный алгоритм. Самый оптимальный алгоритм вообще решает все эти проблемы тем что их избегает. Не нужны никакие двойные массивы. Не нужны никаких тройных проходов чтобы выявить дубли, новые и старые подписки. И кроме зависимостей (мастеров) даже реакции (слейвы) оптимизируются и для них  не нужны сеты и даже связанных списков. Не нужны всякие битовые мапы и прочие костыли. У нас будет при вызове .get() только изменение значения двух полей и все (!) - больше никакой обработки после окончания вызова атома. Ну-ка кто догадается?)
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22233">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 14:47:35 UTC+03:00">
14:47
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
давай уже жги ))
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22234">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 14:51:36 UTC+03:00">
14:51
       </div>

       <div class="text">
&gt;У нас будет при вызове .get() только изменение значения двух полей и все (!) - больше никакой обработки после окончания вызова атома<br><br>как же мы тогда удалим из мастеров тех кто не вызвался?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22235">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 14:55:05 UTC+03:00">
14:55
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а на дубли не забиваешь?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22236">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 14:59:03 UTC+03:00">
14:59
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="text">
В общем тут надо просто оттолкнутся и абстрагироваться от текущих оптимизаций и понять а из-за чего это все? Зачем нам нужны все эти костыли оптимизаций?<br>А костыли от того что язык не предоставляет возможности на этапе компиляции выяснить какие объекты являются атомами и какие у них есть зависимости и не позволяет добавить код отписки и подписки прямо в то место где меняются бранч условия. То есть вот представьте если в функции нет условий то мы можем скомпилировать вместе с кодом получения значения атома заодно и присвоение атома в другой атом по конретному адресу (так как все зависимости известны на этапе компиляции) а к нему в конретное поле в качестве реакции этот атом из глобальной переменной. То есть не нужны никакие массивы будут просто набор полей у каждого атома которым соотвестуют зависимости. Дальше если есть условия то кроме того то нужно добавить код записи в это поле еще и код очистки другого поля тоже по конертному адресу. Всего лишь два или три присваивания. Все максимально быстро, мономорфно и т..д.<br> Единственная проблема что если тайпскрипт или флоу и смогут предоставить инспекцию типов чтобы понять какие переменные являются атомами и возможность преобразовать условия вставляя нужный код подписки и отписки,но все равно это значит что нужно чтобы весь код был типизируемым иначе наличие  any или динамических штук сломает работу атомов. Но есть еще идея - можно заставить пользователя обозначать поля объктов (атомы) через какойто символ - например obj.$somefield тогда наверное можно что-то придумать с бейбл-плагином чтобы увидев в коде поле с символом $ добавить код подписки и отписки
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22237">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:00:28 UTC+03:00">
15:00
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
не, это не честно
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22238">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:01:30 UTC+03:00">
15:01
       </div>

       <div class="text">
и как быть с условиями?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22239">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:01:59 UTC+03:00">
15:01
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22237" onclick="return GoToMessage(22237)">this message</a>
       </div>

       <div class="text">
но идея то классная?)
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22240">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:03:02 UTC+03:00">
15:03
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
нужны  зависимости под конкретное состояние на момент вычислений
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22241">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:03:34 UTC+03:00">
15:03
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22238" onclick="return GoToMessage(22238)">this message</a>
       </div>

       <div class="text">
я же описал - так как зависимости известны на этапе компиляциии то будет добавлен код который при входе в одну ветку будет очищать поле с другим атомов и присваивать себя в другое поле атома и наоборот
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22242">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:04:27 UTC+03:00">
15:04
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22236" onclick="return GoToMessage(22236)">this message</a>
       </div>

       <div class="text">
раскрой пожалуйста тему глубже с примером кода после трансформации<br>я не очень понимаю как мы сможем понять что мы уже есть в мастерах слейва и не добавляться
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22243">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:06:19 UTC+03:00">
15:06
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
это сложный и долгий путь, по сути отдельный язык, как вон у фейсбуковцев
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22244">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:07:20 UTC+03:00">
15:07
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
мы максимум можем знать какой тип атома на месте использования, но что это нам даст?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22245">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:07:31 UTC+03:00">
15:07
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
я делал реактивность на основе анализа конструкторов классов и генерации метаданных, фигня это
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22246">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:10:50 UTC+03:00">
15:10
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22242" onclick="return GoToMessage(22242)">this message</a>
       </div>

       <div class="text">
Кароче есть такая функция<br><pre>const fistName = atom(&quot;&quot;)<br>const lastName = atom(&quot;&quot;);<br>const flag = atom(false);<br><br>const userLabel = ()=&gt;(<br> flag.get() ? firstName.get() : lastName.get();<br>)</pre><br>здесь у вычисляемого атома userLabel (который будет доступе через глобальную переменную) будет вместо динамического массива зависимостей три поля (fistNameDep, lastNameDep, flagDep) в которые будут записываться fistName, lastName и flag. И тогда код скомпилируется примерно в такое<br><pre>const userLabel = ()=&gt;(<br> СurrentAtom.flagDep = flag;<br> if(flag.get() ){<br>   СurrentAtom.lastNameDep = null;<br>   СurrentAtom.fistNameDep = firstName;<br>   return firstName.value<br>  } else {<br>   СurrentAtom.fistNameDep = null;<br>   СurrentAtom.lastNameDep = lastName;<br>   return lastName.value<br>  }<br>)</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22247">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:10:56 UTC+03:00">
15:10
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а, все, плохо прочитал<br>ну т е это путь мапки, но только сразу зафиксированной
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22248">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:11:36 UTC+03:00">
15:11
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а если мапку генерить для всех зависимостей, не разбирая if-ов?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22249">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:12:23 UTC+03:00">
15:12
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
т е у атом будет представлен неким объектом или массивом<br>где у каждого типа мастера будет своя четкая позиция
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22250">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:12:54 UTC+03:00">
15:12
       </div>

       <div class="text">
var atom = {value: ‘’, masterFoo: null, masterX: null, masterBar: null}
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22251">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:13:04 UTC+03:00">
15:13
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22247" onclick="return GoToMessage(22247)">this message</a>
       </div>

       <div class="text">
там нет мапки там сразу фиксированное количество полей. Только если сами зависимости динамические (например фильтр массива) то будет уже отдельное поле с динамическим массивом а пока все зависимости статические то достаточно только запись в фиксированные поля
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22252">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:13:39 UTC+03:00">
15:13
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22249" onclick="return GoToMessage(22249)">this message</a>
       </div>

       <div class="text">
да, все верно, если все статически анализируется и все зависимости известные на этапе компиляции то можно просто накомпилировать нужные поля к нужным атомам
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22253">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:13:46 UTC+03:00">
15:13
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а чтобы пробегаться по мастерам? тоже будет кодогенерация?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22254">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:13:56 UTC+03:00">
15:13
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22253" onclick="return GoToMessage(22253)">this message</a>
       </div>

       <div class="text">
да
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22255">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:14:27 UTC+03:00">
15:14
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
но такое не применить к слейвам?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22256">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:15:01 UTC+03:00">
15:15
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22255" onclick="return GoToMessage(22255)">this message</a>
       </div>

       <div class="text">
к слейвам точно также - просто будет присвоение еще одних фиксированных полей но уже на самом атоме
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22257">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:15:43 UTC+03:00">
15:15
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
смотри, есть проблема<br>у нас 2 инстанса атома с одним типом<br>как мы их запишем?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22258">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:16:00 UTC+03:00">
15:16
       </div>

       <div class="text">
оба используеются в атоме
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22259">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:18:21 UTC+03:00">
15:18
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="text">
Кароче я забыл в примере выше добавить еще присвоение слейвов. Тогда получится такое<br><pre>const fistName = atom(&quot;&quot;)<br>const lastName = atom(&quot;&quot;);<br>const flag = atom(false);<br><br>const userLabel = ()=&gt;(<br> flag.get() ? firstName.get() : lastName.get();<br>)<br><br>//компилируется в<br>const userLabel = ()=&gt;(<br> flagDep.userLabelReaction = CurrentAtom;<br> СurrentAtom.flagDep = flag;<br> if(flag.value){<br>   lastName.userLabelReaction = null;<br>   firstName.userLabelReaction = CurrentAtom;<br>   СurrentAtom.lastNameDep = null;<br>   СurrentAtom.fistNameDep = firstName;<br>   return firstName.value<br>  } else {<br>   firstName.userLabelReaction = null;<br>   lastName.userLabelReaction = CurrentAtom;<br>   СurrentAtom.fistNameDep = null;<br>   СurrentAtom.lastNameDep = lastName;<br>   return lastName.value<br>  }<br>)</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22260">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:19:22 UTC+03:00">
15:19
       </div>

       <div class="text">
То есть точно также все записывается по конкретным полям
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22261">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:19:33 UTC+03:00">
15:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а как перебирать такое?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22262">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:19:42 UTC+03:00">
15:19
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22261" onclick="return GoToMessage(22261)">this message</a>
       </div>

       <div class="text">
тоже кодогенерация
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22263">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:19:47 UTC+03:00">
15:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
не не,<br>это все не прокатит
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22264">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:20:41 UTC+03:00">
15:20
       </div>

       <div class="text">
ты прям хочешь тип получать именно с позиции где он используется?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22265">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:20:57 UTC+03:00">
15:20
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22263" onclick="return GoToMessage(22263)">this message</a>
       </div>

       <div class="text">
почему не прокатит?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22266">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:22:08 UTC+03:00">
15:22
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22264" onclick="return GoToMessage(22264)">this message</a>
       </div>

       <div class="text">
да, точнее если бы у проекта была полная статическая типизация без использования any то в каждом куске кода тайпскрипт или флоу показал бы типы атомов и соотвественно мы могли бы собрать весь граф зависимостей между атомами и нагенерировать поля и код подписки и отписки и код перебора
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22267">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:22:39 UTC+03:00">
15:22
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я так понимаю если в коде будет 500 использований этого атома, то будет 500 полей под каждое использование?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22268">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:22:43 UTC+03:00">
15:22
       </div>

       <div class="text">
что делать с циклами?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22269">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:23:41 UTC+03:00">
15:23
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22267" onclick="return GoToMessage(22267)">this message</a>
       </div>

       <div class="text">
а в массиве сколько полей будет? тоже самое по памяти, даже меньше так как не нужно хранить еще один массив для того чтобы распознать тех от которых нужно отписаться
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22270">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:24:05 UTC+03:00">
15:24
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
var x = this.$foo() + this.$foo();
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22271">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:24:27 UTC+03:00">
15:24
       </div>

       <div class="text">
эти 2 разных юсаджа превратятся в 2 разных поля или нет?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22272">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:25:04 UTC+03:00">
15:25
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22271" onclick="return GoToMessage(22271)">this message</a>
       </div>

       <div class="text">
нет, зачем, одно поле, статически можно проанализировать и понять что зависит только один раз
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22273">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:25:58 UTC+03:00">
15:25
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
окей, я выше говорил к примеру у нас есть 2 инстанса класса, с полями атомами, по сути в них будет одинаковые типы между инстансами
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22274">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:26:38 UTC+03:00">
15:26
       </div>

       <div class="text">
но мы ведь можем юзать разные инстансы в нашем атоме, но при этом типы у них будут одинаковы
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22275">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:27:05 UTC+03:00">
15:27
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22268" onclick="return GoToMessage(22268)">this message</a>
       </div>

       <div class="text">
с циклами без массива не обойтись. Но массив не для всех зависимостей а в качестве отдельного поля. То есть если цикл находится внутри условия то все что до условия будет по отдельным полям а все что касается цикла то будет массив и при смене условия можно будет очистить весь массив сразу
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22276">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:27:37 UTC+03:00">
15:27
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
var x = <a href="a.foo">a.foo</a> + <a href="b.foo">b.foo</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22277">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:27:42 UTC+03:00">
15:27
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
this.$foo() + this.$bar()<br><br>$bar() { return this.$foo() }
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22278">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:28:20 UTC+03:00">
15:28
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22274" onclick="return GoToMessage(22274)">this message</a>
       </div>

       <div class="text">
инстансы будут разные, посмотри на пример выше там привязка на конкретные инстансы атомов firstName, lastName, flag и атома реакции CurrentAtom
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22279">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:28:21 UTC+03:00">
15:28
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
кодогенерация - хрупкая тема
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22280">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:28:24 UTC+03:00">
15:28
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Один объект может использоваться в сотне разных контекстов. Не одновременно, в зависимости от кучи разных условий.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22281">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:29:17 UTC+03:00">
15:29
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22278" onclick="return GoToMessage(22278)">this message</a>
       </div>

       <div class="text">
так инстансов атома firstName могут быть тысячи
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22282">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:30:17 UTC+03:00">
15:30
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22280" onclick="return GoToMessage(22280)">this message</a>
       </div>

       <div class="text">
но все эти зависимости можно будет выявить на этапе компиляции и можно собрать все возможные зависимости и скомпилировать для них отдельные поля и потом накомпилировать код подписки и отписки по этим полям
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22283">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:31:09 UTC+03:00">
15:31
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22281" onclick="return GoToMessage(22281)">this message</a>
       </div>

       <div class="text">
а как с обычным механизмом атомов? там тоже инстанс берется где-то из контекста из замыкания и т.д. Главное чтобы тип был одинаков (но со статической типизацией по-другому не получится)
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22284">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:32:01 UTC+03:00">
15:32
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
var my = atom(() =&gt; a.firstName + b.firstName)<br>вот что будет в мастерах этого атома после вычисления?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22285">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:38:49 UTC+03:00">
15:38
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22284" onclick="return GoToMessage(22284)">this message</a>
       </div>

       <div class="text">
Хороший вопрос) Тут тонкий момент. Зависит от флоу кода. В общем случае должно быть два поля по одному для каждой зависимости - одно поле для fistName второе поле для другого атома fistName. Но если один и тот же атом вызывается дважды то получится избыточность полей. Все зависит от того можно ли на этапе компиляции и статической типизации выяснить откуда приходят атомы &quot;a&quot; и &quot;b&quot;. То есть если мы где вызвали функцию (const func = (a, b)=&gt;{...}) передав один и тот же объект - fun(a, a)/  то можно будет выяснить статически что атом &quot;b&quot; это тоже атом &quot;a&quot; и можно обойтись одним полем-слотом а если же нет то нужно будет компилировать два поля для зависимостей
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22286">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:40:21 UTC+03:00">
15:40
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну как это, типизация не умеет работать с конкретными инстансами классов
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22287">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:42:48 UTC+03:00">
15:42
       </div>

       <div class="text">
даже если это и возможно то это очень хрупко, человек то не сможет определить где какой инстанс ходит по коду, а тут еще машина
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22288">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:44:13 UTC+03:00">
15:44
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22286" onclick="return GoToMessage(22286)">this message</a>
       </div>

       <div class="text">
ну если мы вызываем функцию передавая одну и ту же переменную например <br><pre>function fun(a, b){<br> ...<br>}<br>const obj = {}. <br>fun(obj, obj)</pre><br>то статически можно выяснить что в fun(a, b) (если правда эта функция больше нигде не вызвается) что переменная a и b будет одного инстанса. Вон flow как-то выясняет и ругает что мы можем изменить поле между вызовами функции <a href="https://youtu.be/etKOc80-cw0?t=1459">https://youtu.be/etKOc80-cw0?t=1459</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22289">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:45:14 UTC+03:00">
15:45
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
да проще свой язык изобрести, где парсер будет легко понимать, что атом, а что нет, как skip
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22290">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:45:37 UTC+03:00">
15:45
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22287" onclick="return GoToMessage(22287)">this message</a>
       </div>

       <div class="text">
ладно согласен, все очень хрупко (или точнее все сложно), тогда наверное не стоит пытаться оптимизировать чтобы вместо двух слотов(полей) был один слот-поле для зависимостей.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22291">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:47:17 UTC+03:00">
15:47
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22282" onclick="return GoToMessage(22282)">this message</a>
       </div>

       <div class="text">
Ну и получится, что в каждом объекте у нас будет 100500 полей, 5 из которых заполнены в один момент времени.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22292">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:49:58 UTC+03:00">
15:49
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22291" onclick="return GoToMessage(22291)">this message</a>
       </div>

       <div class="text">
можно попробовать разбить на несколько атомов и таким образом уменьшить количество полей с нуллами.  У меня кстати с этим подходом была еще одна идея - что этот подход разбиения на атомы под каждое условие в итоге приводит к более эффективному алгоритму атомов - то есть не нужно будет делать рекурсивный спуск на установку флага и подъем с актуализацией а это будет нечто похожее на rxjs
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22293">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:53:29 UTC+03:00">
15:53
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
вообще по хорошему атомы калькуляторы не юзать везде подряд, геттеры на порядок быстрее отработают, делаем атомами только сорсы и сайдэффекты, остальным в 99% случаев не надо, ну кроме запросов по сети
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22294">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 15:55:21 UTC+03:00">
15:55
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Надо, для кеширования. Иначе будет куча лишних вычислений повторяться. Плюс промежуточные атомы группируют много зависимостей в мало.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22295">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:07:54 UTC+03:00">
17:07
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
<a href="https://t.me/cevek">@cevek</a>, я со слевами так и не понял =), слейв может уже быть в мастере и мы перед вычислением слейвы не обнуляем
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22296">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:08:40 UTC+03:00">
17:08
       </div>

       <div class="text">
с мастерами проще, т.к. перед вычислениями мы их помечаем или вообще сбрасываем, присваивая другой массив
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22297">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:08:49 UTC+03:00">
17:08
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну так у нас ведь всегда строгое соответствие, если есть мастер значит у мастера есть слейв
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22298">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:12:54 UTC+03:00">
17:12
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а, вижу
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22299">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:13:11 UTC+03:00">
17:13
       </div>

       <div class="text">
а эта штука насколько тяжелая по-сравнению с Set.delete ?<br><pre>for (let master of this.masters)<br>   // не использовались не разу, можно отписываться<br>   if (master.status === 2) {<br>     master.slaves.remove(this)<br>     this.masters.remove(master)      <br>   } <br>   master.status = 1</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22300">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:15:31 UTC+03:00">
17:15
       </div>

       <div class="text">
this.masters можно за один проход сжать, а вот слевы для каждого вложенный цикл получается
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22301">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:29:36 UTC+03:00">
17:29
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да, слейвы надо искать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22302">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:29:46 UTC+03:00">
17:29
       </div>

       <div class="text">
а мастеров удаляем быстро
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22303">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:30:00 UTC+03:00">
17:30
       </div>

       <div class="text">
но это все мелочи
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22304">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:31:49 UTC+03:00">
17:31
       </div>

       <div class="text">
но я думаю тоже можно соптимизировать, в 2-3 прохода по циклу
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22305">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:32:31 UTC+03:00">
17:32
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
можно 10 аргументов передать и один цикл с 10ю if-ами сделать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22306">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:33:47 UTC+03:00">
17:33
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
master.slaves.remove(this)<br>здесь мы просто можем пометить слейвы, что мы их собираемся удалить<br>а вторым циклом убрать пометку и удалить их из массива, тоже очень дешево
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22307">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:36:18 UTC+03:00">
17:36
       </div>

       <div class="text">
к примеру мы можем умножить статус на -1<br>а вторым циклом если статус отрицательный, удалить его из массива и еще раз помножить статус на -1
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22308">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:36:49 UTC+03:00">
17:36
       </div>

       <div class="text">
тогда предыдущий статус не потеряется
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22309">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:39:01 UTC+03:00">
17:39
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
как это в 2 цикла сделать?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22310">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:39:20 UTC+03:00">
17:39
       </div>

       <div class="text">
masters.length * slaves.length сложность ведь
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22311">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:40:50 UTC+03:00">
17:40
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да, перепутал
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22312">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:41:13 UTC+03:00">
17:41
       </div>

       <div class="text">
ну это если мы собираемся отписаться от всего насвете, и у каждого мастера много слейвов
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22313">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:44:34 UTC+03:00">
17:44
       </div>

       <div class="text">
если мы к примеру дестроимся, мы можем к примеру не удалять себя из мастеров, просто себе поставить статус deleted<br>и когда мастер когда нибудь будет перебирать слейвы он увидит что кто то удалился, он его сам выпилит
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22314">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:44:36 UTC+03:00">
17:44
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
общий lang в коллекции на 10к
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22315">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:47:51 UTC+03:00">
17:47
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну кто собирается избавляться от lang?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22316">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:48:50 UTC+03:00">
17:48
       </div>

       <div class="text">
кейс довольно редкий когда надо отписать мастера
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22317">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:48:54 UTC+03:00">
17:48
       </div>

       <div class="text">
кроме удаления самого атома
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22318">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:53:06 UTC+03:00">
17:53
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22315" onclick="return GoToMessage(22315)">this message</a>
       </div>

       <div class="text">
ну компонент сбойнет и вместо него нарисуется ошибка
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22319">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:54:40 UTC+03:00">
17:54
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
из 2х зол между сэтом и массивом - массив лучше<br>перебор сэта очень долгий, добавление дорогое, но поиск и удаление быстрое
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22320">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:55:02 UTC+03:00">
17:55
       </div>

       <div class="text">
в массиве поиск начинает проигрывать после 30 элементов
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22321">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:55:22 UTC+03:00">
17:55
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
странно, чего они не могут set заоптимизить
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22322">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:55:36 UTC+03:00">
17:55
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну это же сэт
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22323">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:55:41 UTC+03:00">
17:55
       </div>

       <div class="text">
тут либо либо
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22324">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:55:58 UTC+03:00">
17:55
       </div>

       <div class="text">
либо быстрый поиск, либо быстрое добавление
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22325">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:56:24 UTC+03:00">
17:56
       </div>

       <div class="text">
поэтому всегда на собеседованиях спрашивают какие коллекции где хорошо работают
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22326">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 17:57:16 UTC+03:00">
17:57
       </div>

       <div class="text">
вместо сэта можно заюзать бинарный поиск в массиве, поиск в нем очень быстрый даже среди тысяч элементов, но добавлять туда - жесть как дорого
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22327">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:00:16 UTC+03:00">
18:00
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22319" onclick="return GoToMessage(22319)">this message</a>
       </div>

       <div class="text">
а сет это разве не хеш-таблица с проверкой нет ли уже элемента по такому адресу? А для перебора обычно формируется связанный список при добавлении. Я не вижу особой разницы чем перебор массива ссылок на объекты быстрее прохода по связанному списку - и там и там long jumps и никакой локальности кеша
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22328">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:01:03 UTC+03:00">
18:01
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну перебор медленный не из за того что сэт, а из за того что итераторы
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22329">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:01:59 UTC+03:00">
18:01
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22328" onclick="return GoToMessage(22328)">this message</a>
       </div>

       <div class="text">
ну это уже проблемы v8, надо проверить вдруг уже запилили инлайнинг, вроде бы даже доклад где-то был
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22330">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:02:16 UTC+03:00">
18:02
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
вчера только прогонял
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22331">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:02:21 UTC+03:00">
18:02
       </div>

       <div class="text">
все очень печально
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22332">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:02:55 UTC+03:00">
18:02
       </div>

       <div class="text">
да я думаю даже там все инлайнится, проблемы где то глубже
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22333">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:03:35 UTC+03:00">
18:03
       </div>

       <div class="text">
в самой структуре сэта(для экономии памяти к примеру), что его не просто перебрать быстро
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22334">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:03:40 UTC+03:00">
18:03
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22331" onclick="return GoToMessage(22331)">this message</a>
       </div>

       <div class="text">
видимо надо пилить свою хеш-таблицу через массивы, интересно будет ли она медленеей чем нативная реализация? вроде бы все должно инлайнится и я не вижу особых проблем
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22335">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:04:04 UTC+03:00">
18:04
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
будет медленнее, я уже пробовал)
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22336">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:04:18 UTC+03:00">
18:04
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
по-моему, самое быстрое развернуть циклы в кучу if-ов
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22337">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:04:25 UTC+03:00">
18:04
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
доступ к массиву по переменной не бесплатный все таки
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22338">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:05:12 UTC+03:00">
18:05
       </div>

       <div class="text">
на каждое чтение там проверяются что мы не ушли за пределы диапазона массива
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22339">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:05:13 UTC+03:00">
18:05
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
передавать мастеры на отписку пачками, по 10 штук
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22340">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:05:34 UTC+03:00">
18:05
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22335" onclick="return GoToMessage(22335)">this message</a>
       </div>

       <div class="text">
а почему медленней то ? хеш-таблица это просто массив который будет разростаться если будет предел по коллизиям. Я думаю самое медленное это будет вычисление хеш-функции но мне  кажется если обязать элементы хеш-таблицы иметь айдишник с уникальным значением (Math.random()) то эта проблема отпадает и мы просто будет вычислять остаток - id % arr.size
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22341">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:06:03 UTC+03:00">
18:06
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
я кстати говорил про HOLEY-массивы тут
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22342">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:06:30 UTC+03:00">
18:06
       </div>

       <div class="text">
что можно пронумеровать все атомы и по индексу писать/читать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22343">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:07:04 UTC+03:00">
18:07
       </div>

       <div class="text">
чтение/запись быстрее Set должно быть
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22344">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:07:17 UTC+03:00">
18:07
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
думаешь?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22345">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:07:46 UTC+03:00">
18:07
       </div>

       <div class="text">
чтобы прочитать он ведь будет искать свойство в мапке индексофом же
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22346">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:07:48 UTC+03:00">
18:07
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
вроде раньше быстрее было
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22347">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:08:12 UTC+03:00">
18:08
       </div>

       <div class="text">
индекс числовой, мне кажется там оптимизации в этой мапке
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22348">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:08:22 UTC+03:00">
18:08
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну ты бы как сделал?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22349">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:08:33 UTC+03:00">
18:08
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
в смысле?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22350">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:08:42 UTC+03:00">
18:08
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
у тебя 3 свойства с ключами: 1, 100, 1000
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22351">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:09:44 UTC+03:00">
18:09
       </div>

       <div class="text">
как сохранить эти элементы в памяти компактно и при этом быстро находить по индексу и быстро перебирать такой массив
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22352">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:10:44 UTC+03:00">
18:10
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
хэш функция по идее быстрее может быть
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22353">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:11:21 UTC+03:00">
18:11
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="text">
Кстати а бинарное дерево кто-то пробовал? Если генерировать атомам рандомные айдишники и по ним строить дерево то вроде как при удалении нам не нужно будет ротировать это дерево.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22354">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:11:28 UTC+03:00">
18:11
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я пробовал
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22355">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:12:17 UTC+03:00">
18:12
       </div>

       <div class="text">
поиск быстрый в нем да, добавлять супер дорого
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22356">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:12:25 UTC+03:00">
18:12
       </div>

       <div class="text">
удалять тоже дорого
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22357">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:13:55 UTC+03:00">
18:13
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22355" onclick="return GoToMessage(22355)">this message</a>
       </div>

       <div class="text">
а почему дорого? добавление это ведь поиск со спуском по дереву и создание нового объекта  если нужного ключа не нашлось
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22358">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:14:22 UTC+03:00">
18:14
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я это в массиве делал
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22359">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:14:48 UTC+03:00">
18:14
       </div>

       <div class="text">
в массиве добавлять в среднем приходится в середину, соответство двигая все что справа
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22360">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:14:56 UTC+03:00">
18:14
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22356" onclick="return GoToMessage(22356)">this message</a>
       </div>

       <div class="text">
это если ротировать дерево, а если айдишники рандомные то ротировать вроде как не нужно (достаточно спуститься по дереву как при поиске и удалить объект) или я ошибаюсь?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22361">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:15:21 UTC+03:00">
18:15
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
что значит ротировать?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22362">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:16:03 UTC+03:00">
18:16
       </div>

       <div class="text">
на удаление да, можно впринципе не удалять из массива, а заменить null
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22363">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:16:16 UTC+03:00">
18:16
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22361" onclick="return GoToMessage(22361)">this message</a>
       </div>

       <div class="text">
ротация бинарного дерева <a href="https://ru.wikipedia.org/wiki/Двоичное_дерево_поиска#Удаление_узла_(REMOVE)">https://ru.wikipedia.org/wiki/Двоичное_дерево_поиска#Удаление_узла_(REMOVE)</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22364">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:17:15 UTC+03:00">
18:17
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну это про дерево, это очень дорого по памяти будет, но поиск там дешевый, удаление дешевое, перебор дешевый
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22365">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:17:31 UTC+03:00">
18:17
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22362" onclick="return GoToMessage(22362)">this message</a>
       </div>

       <div class="text">
нет я имел ввиду настоящее бинарное дерево через объекты со ссылками а не через массив
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22366">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:17:48 UTC+03:00">
18:17
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22364" onclick="return GoToMessage(22364)">this message</a>
       </div>

       <div class="text">
а почему дорого по памяти?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22367">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:18:10 UTC+03:00">
18:18
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я тебя понял да, но нет, это будет слишком расточительно на каждые 2 слейва создавать по объекту
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22368">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:19:31 UTC+03:00">
18:19
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22367" onclick="return GoToMessage(22367)">this message</a>
       </div>

       <div class="text">
так можно попробовать rank увеличить, не бинарое дерево а тенарное или 5 или 10 ссылок на детей
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22369">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:19:37 UTC+03:00">
18:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
бинарный поиск это про поиск в массиве
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22370">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:21:36 UTC+03:00">
18:21
       </div>

       <div class="text">
не знаю, мне кажется какой ненужный оверхед, надо найти кейсы для начала гд будет тормозить наивная реализация через indexof
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22371">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:34:25 UTC+03:00">
18:34
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22368" onclick="return GoToMessage(22368)">this message</a>
       </div>

       <div class="text">
но если реализуешь будет прикольно взглянуть на результаты в сравнении с массивом и сэтом
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22372">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:38:29 UTC+03:00">
18:38
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
мда, проверил <br>Array[] x 230,717 ops/sec ±1.44% (63 runs sampled)<br>Set.add x 1,281,741 ops/sec ±1.57% (65 runs sampled)
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22373">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:38:47 UTC+03:00">
18:38
       </div>

       <div class="text">
так что да, тормозная мапка на массиве
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22374">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 18:48:41 UTC+03:00">
18:48
       </div>

       <div class="text">
можно еще думать в сторону лишних элементов в массиве
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22375">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 19:19:48 UTC+03:00">
19:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а до скольки элементов удаление из массива будет быстрее Set.delete?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22376">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 19:21:56 UTC+03:00">
19:21
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
по моему всегда быстрее
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22377">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 19:22:25 UTC+03:00">
19:22
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
странно, это ж как из мапы удалить, не?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22378">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 19:38:07 UTC+03:00">
19:38
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а, ты про Set, я проверил, да он быстрее на 100 раза в 4
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22379">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 19:56:07 UTC+03:00">
19:56
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
<a href="http://java-performance.info/implementing-world-fastest-java-int-to-int-hash-map/">http://java-performance.info/implementing-world-fastest-java-int-to-int-hash-map/</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22380">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 20:19:40 UTC+03:00">
20:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
быстрое удаление из массива без сохранение порядка практически бесплатно
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22381">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 20:19:59 UTC+03:00">
20:19
       </div>

       <div class="text">
поиск только отьест время
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22382">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 20:21:09 UTC+03:00">
20:21
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
если много удалять, плохо
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22383">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 20:58:31 UTC+03:00">
20:58
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
кстати если юзать битовые маски в статусе, тогда можно обойтись только одним прогоном мастеров в случае если никто не удалился
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22384">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:03:04 UTC+03:00">
21:03
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
прогоном после calc?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22385">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:05:19 UTC+03:00">
21:05
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
до калка
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22386">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:07:15 UTC+03:00">
21:07
       </div>

       <div class="text">
а хотя наверное не, в каких то кейсах будет бага
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22387">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:12:26 UTC+03:00">
21:12
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а если в слевы пушить что-то вроде [true, slave]?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22388">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:13:35 UTC+03:00">
21:13
       </div>

       <div class="text">
где первый аргумент - флаг того, что связь есть
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22389">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:13:47 UTC+03:00">
21:13
       </div>

       <div class="text">
хотя не, накладно
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22390">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:19:23 UTC+03:00">
21:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
можно такой вариант еще сделать. когда слейв собирается отписаться от мастера, мы просто добавляем во второй массив слейвов себя, и когда мастер будет прогонять список слейвов если он увидит что второй список не пустой, тогда пройдется по ним, сделает всем пометку, и когда будет прогонять основные слейвы то удалит всех с пометкой
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22391">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:20:32 UTC+03:00">
21:20
       </div>

       <div class="text">
здесь накладные расходы только на пуш будут
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22392">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:25:24 UTC+03:00">
21:25
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
пометку то где он сделает, в слейве чтоль?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22393">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:26:56 UTC+03:00">
21:26
       </div>

       <div class="text">
не прокатит так, слейв же где-то еще может использоваться, надо тогда эти slavesToDelete держать в мастере до момента вычисления другого слейва и через slavesToDelete.indexOf удалять
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22394">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:33:27 UTC+03:00">
21:33
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
пометку он сделает в процессе перебора слейвов
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22395">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:34:12 UTC+03:00">
21:34
       </div>

       <div class="text">
пометит и сразу ее уберет. там нет никаких рекурсивных вещей между ними
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22396">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:35:29 UTC+03:00">
21:35
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
так он indexOf по удаляемым слейвам будет делать?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22397">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:36:00 UTC+03:00">
21:36
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
нет
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22398">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:36:26 UTC+03:00">
21:36
       </div>

       <div class="text">
это в процессе пометки своих слейвов проткхшими
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22399">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:37:03 UTC+03:00">
21:37
       </div>

       <div class="text">
когда мейби dirty проставляем
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22400">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:37:32 UTC+03:00">
21:37
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а как мастер их поставит то, его слейв просто не вызвал
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22401">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:37:49 UTC+03:00">
21:37
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Не знаете, реально ли сделать на css-grid дашборд, который бы равномерно заполнил весь экран элементами, стараясь сохранять их пропорции? И без скроллинга, пока они не достигнут минимальных размеров.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22402">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:37:56 UTC+03:00">
21:37
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
слейв задетектить только может, что мастер больше не нужен
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22403">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:38:29 UTC+03:00">
21:38
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да, в этот момент слейв добавляет себя в второй массив слейвов этого мастера
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22404">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:39:24 UTC+03:00">
21:39
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а дальше?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22405">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:39:41 UTC+03:00">
21:39
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а когда нибудь потом мастер будет прогонять свои слейвы, сначала глянет в этот второй список пометит там всех, и выпилит из основновного списка слейвов
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22406">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:40:03 UTC+03:00">
21:40
       </div>

       <div class="text">
по пометке выпилит
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22407">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:40:49 UTC+03:00">
21:40
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
сложно, если слейв добавится опять? или мастер надо грохнуть, т.к. он больше не нужен, сейчас просто slaves.size === 0 - значит кондидат на удаление
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22408">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:42:45 UTC+03:00">
21:42
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну тогда проходить по всем мастерам которые потеряли слейвы сразу же после калков. в этом же микротаске
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22409">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:43:48 UTC+03:00">
21:43
       </div>

       <div class="text">
но опять таки, это все оптимизация только для списов с больше 50 слейвов, если меньше то индексоф оптимальнее выходит
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22410">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:45:11 UTC+03:00">
21:45
       </div>

       <div class="text">
таких я думаю наберется пару тройку на весь проект
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22411">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:46:02 UTC+03:00">
21:46
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
курс доллара, от него зависит цена 10к товаров, которые выводятся на экран, мда
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22412">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:46:37 UTC+03:00">
21:46
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну вот, всего 1 атом с 10к слейвами
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22413">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:47:05 UTC+03:00">
21:47
       </div>

       <div class="text">
в этом случае эта оптимизация спасет мир
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22414">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:50:40 UTC+03:00">
21:50
       </div>

       <div class="text">
ну т е мы перенем работу по удалению из слейвов в конец микротаски. будет всего 1 прогон по слейвам
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22415">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:51:31 UTC+03:00">
21:51
       </div>

       <div class="text">
даже если этот курс доллара удалится со всех 10к
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22416">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:52:08 UTC+03:00">
21:52
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
т.е. прежде чем инвалидировать слейвов, мастер пометит их, начнет перебирать и одновременно перестраивать массив слейвов, выкидывая помеченные<br>а потом надо еще цикл, что бы пометку снять, так?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22417">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:52:26 UTC+03:00">
21:52
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22418">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:53:47 UTC+03:00">
21:53
       </div>

       <div class="text">
ну почти. мастер пробежится по списку удаляемых слейвов. пометит их, а потом по основному списку и будет уже выпиливать по метке
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22419">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:54:04 UTC+03:00">
21:54
       </div>

       <div class="text">
и метку сразу же убирать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22420">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:57:11 UTC+03:00">
21:57
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ага, т.е. в худшем случае памяти потребуется 2*masters + 2*slaves
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22421">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 21:59:18 UTC+03:00">
21:59
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а зачем 2*masters?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22422">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:00:18 UTC+03:00">
22:00
       </div>

       <div class="text">
ну это не страшно, тут главное не зафризить долгим вычислением основной поток
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22423">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:01:30 UTC+03:00">
22:01
       </div>

       <div class="text">
10к*10к поиском это реально может на пару секунд зафризить
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22424">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:01:38 UTC+03:00">
22:01
       </div>

       <div class="text">
100млн переборов
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22425">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:02:58 UTC+03:00">
22:02
       </div>

       <div class="text">
ну там конечно не так будет при удалении колво слейвов будет уменьшаться
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22426">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:02:59 UTC+03:00">
22:02
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
мастеров 2, т.к. мы ж их перед калком обнуляем
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22427">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:03:43 UTC+03:00">
22:03
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну в моем сценарии такого нет
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22428">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:03:54 UTC+03:00">
22:03
       </div>

       <div class="text">
это у димы так сейчас
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22429">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:03:56 UTC+03:00">
22:03
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
иначе нужны маски
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22430">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:04:49 UTC+03:00">
22:04
       </div>

       <div class="text">
твой же алгоритм со статусами не будет работать, мы ж вчера обсуждали случай, когда сын становится внуком
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22431">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:07:05 UTC+03:00">
22:07
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так битовая маска решает эту проблему
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22432">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:07:23 UTC+03:00">
22:07
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
на глубину до 30?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22433">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:07:56 UTC+03:00">
22:07
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22434">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:08:26 UTC+03:00">
22:08
       </div>

       <div class="text">
с бигинтом до 10к
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22435">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:13:19 UTC+03:00">
22:13
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а маска - индикатор на каких уровнях был запрошен мастер, относительно слейва?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22436">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:14:25 UTC+03:00">
22:14
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ага
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22437">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:14:41 UTC+03:00">
22:14
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
у тебя в начале было с trxId, вот с ним разве не будет работать?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22438">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:15:12 UTC+03:00">
22:15
       </div>

       <div class="text">
если мастер перескакивает на уровень - ему другой trxId присвоят
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22439">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:16:18 UTC+03:00">
22:16
       </div>

       <div class="text">
нам не уровень надо, а сам факт перескока
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22440">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:18:06 UTC+03:00">
22:18
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
перед калком мы на текущий уровень проставляем всем мастерам бит. мастер если его видит то ставит другой бит что он был использован. после калка смотрим кто на нашем уровне был вызван, кто добавился новый, и кто не разу не запустился(бит не тронут) и все биты возврщаем на место
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22441">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:19:37 UTC+03:00">
22:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
не понимаю пока, зачем бит, мастеру просто надо сказать где он был использован в текущем слейве или во внуке
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22442">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:19:54 UTC+03:00">
22:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
без битов проблема в том что один и тот же атом может использоваться на разных уровнях в процессе вычисления
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22443">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:19:59 UTC+03:00">
22:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
каждый слейв проставляет мастерам свой уникальный id
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22444">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:20:52 UTC+03:00">
22:20
       </div>

       <div class="text">
мы можем сказать, что мастер заиспользовал какой-то другой слейв
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22445">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:21:08 UTC+03:00">
22:21
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
как?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22446">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:22:27 UTC+03:00">
22:22
       </div>

       <div class="media_wrap clearfix">

        <div class="media clearfix pull_left media_photo">

         <div class="fill pull_left">

         </div>

         <div class="body">

          <div class="title bold">
Photo
          </div>

          <div class="description">
Not included, change data exporting settings to download.
          </div>

          <div class="status details">
1280×1176, 70.5 KB
          </div>

         </div>

        </div>

       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22447">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:23:09 UTC+03:00">
22:23
       </div>

       <div class="text">
s когда пойдет вычисляться, он пометит мо и м1
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22448">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:24:43 UTC+03:00">
22:24
       </div>

       <div class="text">
дальше в процессе калка увидит что пришел м0 и пометит его что все круто, ты уже в списке мастеров, поставит метку ему что игнорить след его вызовы
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22449">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:25:35 UTC+03:00">
22:25
       </div>

       <div class="text">
дальше м1 он проставит всем мастерам метку( перезатрет)
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22450">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:25:55 UTC+03:00">
22:25
       </div>

       <div class="text">
м0 и м2
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22451">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:27:04 UTC+03:00">
22:27
       </div>

       <div class="text">
когда работа опять вернется к s то в м0 будет метка от м1. и случится че нить нехорошее
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22452">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:27:22 UTC+03:00">
22:27
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
s - выставил метку m0 и m1, но m0 не запросил<br>m1 -выставил свою метку m0<br>s после калка проверит метку m0, увидит, что она не его и грохнет, не?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22453">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:28:13 UTC+03:00">
22:28
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да грохнет
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22454">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:28:21 UTC+03:00">
22:28
       </div>

       <div class="text">
но не должен
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22455">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:28:47 UTC+03:00">
22:28
       </div>

       <div class="text">
m0 он вызовет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22456">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:28:52 UTC+03:00">
22:28
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а, порядок вычислений
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22457">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:29:54 UTC+03:00">
22:29
       </div>

       <div class="text">
а если метку сохранять/восстанавливать?<br>s - выставил m0,m1 вызвал calc<br>m1 - выставил m0, вызвал calc, восстановил метку m0
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22458">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:30:37 UTC+03:00">
22:30
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
как ты ее хочешь восстановить?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22459">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:30:46 UTC+03:00">
22:30
       </div>

       <div class="text">
у тебя сотни мастеров
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22460">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:31:05 UTC+03:00">
22:31
       </div>

       <div class="text">
у всех были разные статусы перед калком
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22461">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:31:14 UTC+03:00">
22:31
       </div>

       <div class="text">
теперь надо вернуть все как было
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22462">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:31:45 UTC+03:00">
22:31
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ну да, массив меток
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22463">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:32:46 UTC+03:00">
22:32
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну кстати да, хорошая идея
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22464">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:33:18 UTC+03:00">
22:33
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
битовая масска - тот же массив, только упакованный
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22465">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:33:51 UTC+03:00">
22:33
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
можем сделать переиспользование массива
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22466">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:35:17 UTC+03:00">
22:35
       </div>

       <div class="text">
перед калком сохранять все текущие статусы в массив из пула, а после все статусы на место вернуть в мастера и вернуть массив обратно в пул
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22467">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:36:31 UTC+03:00">
22:36
       </div>

       <div class="text">
тогда лимита нет на глубину 30
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22468">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:43:03 UTC+03:00">
22:43
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а массив на каждый атом чтоль?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22469">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:43:19 UTC+03:00">
22:43
       </div>

       <div class="text">
или это в худшем случае
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22470">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:43:26 UTC+03:00">
22:43
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да нет конечно, из пула доставать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22471">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:43:42 UTC+03:00">
22:43
       </div>

       <div class="text">
пул будет размером в максимальную глубину вычислений в проекте
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22472">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:44:16 UTC+03:00">
22:44
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а в чем разница со свапом мастеров тогда в отдельный массив?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22473">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:44:17 UTC+03:00">
22:44
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я думаю в районе максимум 3-5
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22474">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:44:52 UTC+03:00">
22:44
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
пул - в слейве будет?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22475">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:45:00 UTC+03:00">
22:45
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
пул нет, он глобальный
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22476">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:45:24 UTC+03:00">
22:45
       </div>

       <div class="text">
мы будем брать оттуда только на момент вычисления и сразу же возвращать по окончанию вычисления
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22477">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:45:32 UTC+03:00">
22:45
       </div>

       <div class="text">
в атоме ничего хранится не будет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22478">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:47:34 UTC+03:00">
22:47
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
т.е. слейв берет из пула для всех своих мастеров массив статусов, помечает их<br>выполняет мастер, тот аналогично для своих мастеров пул берет и т.д.?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22479">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:47:45 UTC+03:00">
22:47
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22480">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:49:40 UTC+03:00">
22:49
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
т.е. размер пула =  вложенность * среднее кол-во мастеров
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22481">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:50:44 UTC+03:00">
22:50
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
нет, просто максимальная вложенность в проекте
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22482">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:51:45 UTC+03:00">
22:51
       </div>

       <div class="text">
размер ты имеешь ввиду сколько массивов создастся или с содержимом массивов?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22483">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:52:05 UTC+03:00">
22:52
       </div>

       <div class="text">
ну в любом случае это будут копейки
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22484">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:52:07 UTC+03:00">
22:52
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
да, всего, в самом худшем случае
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22485">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:52:13 UTC+03:00">
22:52
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
килобайта даже наверное не будет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22486">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:52:39 UTC+03:00">
22:52
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
каждый атом в цепочке будет из пула брать ведь
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22487">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:52:56 UTC+03:00">
22:52
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну после вычисления сразу возвращать обратно
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22488">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:53:42 UTC+03:00">
22:53
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
100 вложенных вызовов, по 10 мастеров в каждом
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22489">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:54:00 UTC+03:00">
22:54
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
если у тебя макс вложенность 100, значит в пуле будет 100 массивов с 10 элементами каждый
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22490">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:55:15 UTC+03:00">
22:55
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
с файберами может и больше быть, но да, массивы нужны на время вычислений
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22491">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:56:22 UTC+03:00">
22:56
       </div>

       <div class="text">
цепочка вычислений просто может прерваться, что б потом от слейва снова перезапуститься
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22492">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:56:44 UTC+03:00">
22:56
       </div>

       <div class="text">
в момент прерывания можно весь пул освобождать скорее всего
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22493">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 22:58:19 UTC+03:00">
22:58
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну это уже через  try {} finally { возвращаем в пул }
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22494">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:01:45 UTC+03:00">
23:01
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
по идее можно в первом слейве сразу весь пул сбрасывать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22495">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:05:39 UTC+03:00">
23:05
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
на самом нижнем уровне вычисления(90% всех вычислений в проекте) мы можем даже не юзать этот пул, ибо у всех состояния там будут дефолтные и у всех одни и теже
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22496">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:06:13 UTC+03:00">
23:06
       </div>

       <div class="text">
пул применять от уровня 2 и дальше
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22497">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:06:25 UTC+03:00">
23:06
       </div>

       <div class="text">
это уже довольно редкие кейсы будут
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22498">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:06:55 UTC+03:00">
23:06
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а как уровень определить?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22499">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:07:15 UTC+03:00">
23:07
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну по глобальной переменной
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22500">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:07:17 UTC+03:00">
23:07
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
через контекст передавать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22501">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:07:51 UTC+03:00">
23:07
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
каждый calc будет перед вызовом увеличивать ее а после уменьшать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22502">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:12:33 UTC+03:00">
23:12
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
нижний уровень - это мастер-источник?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22503">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:13:53 UTC+03:00">
23:13
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
наоборот
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22504">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:14:22 UTC+03:00">
23:14
       </div>

       <div class="text">
сайдэффекткер
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22505">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:14:42 UTC+03:00">
23:14
       </div>

       <div class="text">
его дернули и пошел обновляться
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22506">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:15:37 UTC+03:00">
23:15
       </div>

       <div class="text">
потребитель
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22507">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:15:47 UTC+03:00">
23:15
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а для чего level для этого, его и так понятно - нет слейвов
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22508">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:16:28 UTC+03:00">
23:16
       </div>

       <div class="text">
если в контексте нет вызывающего атома - значит потребитель
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22509">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:17:05 UTC+03:00">
23:17
       </div>

       <div class="text">
а пул в слейвах даст эффект?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22510">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:17:26 UTC+03:00">
23:17
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
не понял
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22511">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:19:29 UTC+03:00">
23:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
я про оптимизацию уаления слейвов
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22512">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:19:43 UTC+03:00">
23:19
       </div>

       <div class="text">
slavesToDelete также можно в пуле резервить
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22513">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:20:27 UTC+03:00">
23:20
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну там нужна связь же мастер слейв
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22514">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:21:05 UTC+03:00">
23:21
       </div>

       <div class="text">
можно наверное и в пул засунуть. по парам
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22515">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:23:15 UTC+03:00">
23:23
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
связь и так есть, мастер же резервирует пул
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22516">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:24:15 UTC+03:00">
23:24
       </div>

       <div class="text">
весь пул - массив массивов, когда есть что удалять, мастер резервирует один массив до момента удаления
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22517">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:24:27 UTC+03:00">
23:24
       </div>

       <div class="text">
только вот последовательно освобождать не получится
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22518">

      <div class="body">

       <div class="pull_right date details" title="26.10.2018 23:24:44 UTC+03:00">
23:24
       </div>

       <div class="text">
имеет ли это вообще смысл
       </div>

      </div>

     </div>

     <div class="message service" id="message-411">

      <div class="body details">
27 October 2018
      </div>

     </div>

     <div class="message default clearfix" id="message22519">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:19:31 UTC+03:00">
10:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
слейвы можно чистить отложенно, что-то вроде своего gc
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22520">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:23:08 UTC+03:00">
10:23
       </div>

       <div class="text">
т.е. ссылку на slavesToDelete мы берем из пула, заполняем, зафигачиваем очередь {master, slavesToDelete}  и по idle чистим слейвы мастера.<br>сам мастер тоже чистит, если его успели явно вызвать до очистки через gc
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22521">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:24:29 UTC+03:00">
10:24
       </div>

       <div class="text">
если каких-то ацких вычислений все-время не происходит, то пул не будет разрастаться
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22522">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:25:49 UTC+03:00">
10:25
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а как эту очередь создать? master, slaves?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22523">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:26:15 UTC+03:00">
10:26
       </div>

       <div class="text">
это же сгруппировать надо по мастерам их
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22524">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:27:50 UTC+03:00">
10:27
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
слейв же себя добавляет в master.slavesToDelete
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22525">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:28:24 UTC+03:00">
10:28
       </div>

       <div class="text">
слейв вычислился и понял, что мастер не используется, значит надо добавить в него себя на удаление
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22526">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:30:56 UTC+03:00">
10:30
       </div>

       <div class="text">
все как ты описывал, тольки выделять память из пула, в пул забабахивать мастер с этими slavesToDelete
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22527">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:31:53 UTC+03:00">
10:31
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
но мастер же может вернуться назад, после повторного вычисления. мы не можем это в иддле делать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22528">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:33:16 UTC+03:00">
10:33
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
тогда придется удалять слейв на удаление через splice + indexOf
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22529">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:33:28 UTC+03:00">
10:33
       </div>

       <div class="text">
в любом случае придется так, что с gc, что без
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22530">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:33:33 UTC+03:00">
10:33
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
аа, в гете к мастеру мы можем это делать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22531">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:34:04 UTC+03:00">
10:34
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
да, можем, но если мастер долго не гетается, память будет засираться
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22532">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:34:06 UTC+03:00">
10:34
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
перед гетом чистим все слейвы
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22533">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:34:34 UTC+03:00">
10:34
       </div>

       <div class="text">
это вкупе с индлом
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22534">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:35:15 UTC+03:00">
10:35
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а перед гетом все-равно splice+indexOf получается
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22535">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:35:27 UTC+03:00">
10:35
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
почему?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22536">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:35:51 UTC+03:00">
10:35
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а как из master.slavesToDelete слейву убрать только себя?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22537">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:36:38 UTC+03:00">
10:36
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так мастера когда будут дергать, он будет глядеть на свои слейвы
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22538">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:37:12 UTC+03:00">
10:37
       </div>

       <div class="text">
он будет там чистить всех, не только этот слейв
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22539">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:37:22 UTC+03:00">
10:37
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
и? в master.slavesToDelete = [slave1, slave2], а дергает slave2 например
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22540">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:37:42 UTC+03:00">
10:37
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну значит уберет оба
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22541">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:38:01 UTC+03:00">
10:38
       </div>

       <div class="text">
это же быстро
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22542">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:38:58 UTC+03:00">
10:38
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
оба нельзя, slave1 в этом тике может и не вызовет мастер
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22543">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:39:43 UTC+03:00">
10:39
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так он уже помечен на удаление, его как бы уже не должно быть в списке слейвов
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22544">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:40:03 UTC+03:00">
10:40
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
не, он может опять его запросить в этом же тике
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22545">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:40:10 UTC+03:00">
10:40
       </div>

       <div class="text">
и надо вернуть тогда
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22546">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:40:20 UTC+03:00">
10:40
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну значит добавится снова
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22547">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:40:55 UTC+03:00">
10:40
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
вроде да
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22548">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:41:38 UTC+03:00">
10:41
       </div>

       <div class="text">
на самом деле не обязательно перед гетом удалять
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22549">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:42:13 UTC+03:00">
10:42
       </div>

       <div class="text">
у нас слейвы нужны для инвалидации, когда мастер обновился
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22550">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 10:42:50 UTC+03:00">
10:42
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну я думаю этот метод надо будет вызывать везде где будет обращение к слейвам, чтобы случайно удаленный слейв не обработать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22551">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:25:02 UTC+03:00">
13:25
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
дим, а ты говорил, у тебя такая конструкция тормозила чтоль? toString() { return <a href="this.id">this.id</a> }<br>и ты сделал atom.toString = () =&gt; &apos;some&apos; ?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22552">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:27:16 UTC+03:00">
13:27
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
<a href="atom.id">atom.id</a> = <code>${ host }.${ field }</code>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22553">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:27:41 UTC+03:00">
13:27
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а было как?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22554">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:28:12 UTC+03:00">
13:28
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Формирование строки на больших объёмах - ресурсоёмко.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22555">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:28:24 UTC+03:00">
13:28
       </div>

       <div class="text">
Так и было.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22556">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:29:06 UTC+03:00">
13:29
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
и тут решения нет?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22557">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:29:34 UTC+03:00">
13:29
       </div>

       <div class="text">
для коллекций можно переиспользовать строку или вычислять как-то id-шник
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22558">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:32:45 UTC+03:00">
13:32
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Я не вижу. Айдишник здорово упрощает отладку, особенно в форме Symbol.toStringTag.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22559">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:33:33 UTC+03:00">
13:33
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
просто хранить не сконкатенированную строку, а отдельно хост и name, а конкатенировать в toString
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22560">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:33:56 UTC+03:00">
13:33
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Не работает с Symbol.toStringTag
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22561">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:34:28 UTC+03:00">
13:34
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а чем он лучше toString?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22562">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:34:52 UTC+03:00">
13:34
       </div>

       <div class="text">
что б выводилось &quot;[object bla-bla]&quot;, вместо &quot;bla-bla&quot;
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22563">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:35:41 UTC+03:00">
13:35
       </div>

       <div class="text">
и в чем проблема, гетер работает вроде - <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22564">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:36:34 UTC+03:00">
13:36
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Консоль игнорирует геттер - она смотрит, чтобы там была константная строка и только тогда показывает.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22565">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:37:37 UTC+03:00">
13:37
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
в каком случае игнорирует?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22566">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:38:27 UTC+03:00">
13:38
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="media_wrap clearfix">

        <div class="media clearfix pull_left media_photo">

         <div class="fill pull_left">

         </div>

         <div class="body">

          <div class="title bold">
Photo
          </div>

          <div class="description">
Not included, change data exporting settings to download.
          </div>

          <div class="status details">
908×155, 24.9 KB
          </div>

         </div>

        </div>

       </div>

       <div class="text">
Вот так toStringTag выглядит в отладчике.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22567">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:38:40 UTC+03:00">
13:38
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22565" onclick="return GoToMessage(22565)">this message</a>
       </div>

       <div class="text">
Во всех, когда выводит объект.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22568">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:40:25 UTC+03:00">
13:40
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а, надо принудительно toString делать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22569">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:41:12 UTC+03:00">
13:41
       </div>

       <div class="text">
т.е. если объект раскрываешь или наводишь на него в отладчике, не появляется этого тега, а если нажать на Symbol(Symbol.toStringTag): ... будет undefined
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22570">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:41:53 UTC+03:00">
13:41
       </div>

       <div class="text">
а если get id() { return &apos;bla-bla&apos;} задать?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22571">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:43:02 UTC+03:00">
13:43
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Это придётся каждый объект раскрывать и нажать &quot;показать id&quot; - довольно не удобно. А тут сразу видно что есть что.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22572">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:44:18 UTC+03:00">
13:44
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
для отладчика врубать генерацию тегов, без отладчика - лениво вычислять для логирования ошибок
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22573">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:44:44 UTC+03:00">
13:44
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Запилил витрину для $mol приложений. <a href="https://t.me/wmakeev">@wmakeev</a> как насчёт выложить куда-нибудь демо версию твоего приложения и тоже добавить на витрину?<br><a href="https://showcase.hyoo.ru/">https://showcase.hyoo.ru/</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22574">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:45:49 UTC+03:00">
13:45
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22572" onclick="return GoToMessage(22572)">this message</a>
       </div>

       <div class="text">
Да ладно, в большинстве приложений айдишники всё-равно нужны для аналитики, тестов и тп.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22575">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:46:38 UTC+03:00">
13:46
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а ленивость не поможет тут?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22576">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:47:03 UTC+03:00">
13:47
       </div>

       <div class="text">
нужны ид-шники только для компонент, а промежуточные объекты не нужны
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22577">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:47:36 UTC+03:00">
13:47
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Тут ещё такой нюанс - дешевле сразу создать строку и положить в поле, чем на каждое обращение рекурсивно  формировать её геттером.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22578">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:47:57 UTC+03:00">
13:47
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
кэшить не проблема
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22579">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:48:58 UTC+03:00">
13:48
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Так это фактически и есть предзаполнение кеша.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22580">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:49:14 UTC+03:00">
13:49
       </div>

       <div class="text">
Не для всего правда он нужен на проде, да.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22581">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:49:21 UTC+03:00">
13:49
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
только не ленивое
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22582">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
ВМ
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 13:59:43 UTC+03:00">
13:59
       </div>

       <div class="from_name">
Виталий Макеев
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22573" onclick="return GoToMessage(22573)">this message</a>
       </div>

       <div class="text">
Надо бекенд замочить. А так да, вполне возможно. Я буду к концу года обновлять и сделаю вариант.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22583">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 14:05:03 UTC+03:00">
14:05
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Отлично. Я тут думаю поднять бизнес по созданию приложений на заказ. Кому была бы интересна эпизодическая подработка с созданием приложений/экранов/компонент на $mol?
       </div>

      </div>

     </div>

     <div class="message service" id="message22584">

      <div class="body details">
Дим pinned <a href="#go_to_message22583" onclick="return GoToMessage(22583)">this message</a>
      </div>

     </div>

     <div class="message default clearfix" id="message22585">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 16:09:42 UTC+03:00">
16:09
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
<a href="https://t.me/cevek">@cevek</a>, а arr.length = 0 не релокейтят память массива?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22586">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 16:10:35 UTC+03:00">
16:10
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
раньше было быстрее попом пройтись. сейчас не знаю
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22587">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 16:11:21 UTC+03:00">
16:11
       </div>

       <div class="text">
ну по сути указатель только сбрасывать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22588">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 16:11:33 UTC+03:00">
16:11
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
я к тому, что имеет смысл из пула брать массивы, а в конце работы с ними длинну им урезать, что б освободилась память элементов, но не память массива или просто = [] делать?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22589">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 16:12:38 UTC+03:00">
16:12
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ты уже копейки считаешь
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22590">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 16:13:09 UTC+03:00">
16:13
       </div>

       <div class="text">
в элементах там будет только цифры
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22591">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 16:14:49 UTC+03:00">
16:14
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
почему, слейвы на удаление будут
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22592">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 18:44:44 UTC+03:00">
18:44
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я вообще хотел прям в массив слейвов добавлять
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22593">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 18:45:38 UTC+03:00">
18:45
       </div>

       <div class="text">
и держать переменную сколько слейвов на удаление
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22594">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 18:46:01 UTC+03:00">
18:46
       </div>

       <div class="text">
они всегда будут писаться в конеу
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22595">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 18:50:56 UTC+03:00">
18:50
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ну тогда надо при добавлении слейвов чекать эти слейвы на удаление в конце
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22596">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 19:11:53 UTC+03:00">
19:11
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну при вызове мастера они уже прочекаются
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22597">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 19:35:20 UTC+03:00">
19:35
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Я тут пилю свой jsperf. Есть ли какой-то способ форсировать сборку мусора перед началом замеров?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22598">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 19:46:49 UTC+03:00">
19:46
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
в смысле? страницу с нуля открыть не будет мусора?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22599">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 19:54:27 UTC+03:00">
19:54
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Перезагружать страницу после каждого замера - так себе вариант.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22600">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:20:29 UTC+03:00">
20:20
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
никак
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22601">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:20:45 UTC+03:00">
20:20
       </div>

       <div class="text">
нужно хром с флагом запускать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22602">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:20:58 UTC+03:00">
20:20
       </div>

       <div class="text">
чтобы из js можно было вызвать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22603">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:25:03 UTC+03:00">
20:25
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
А что если создать большой массив и освободить и подождать секунду или типа того?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22604">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:25:56 UTC+03:00">
20:25
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
наверное можно но ненадежно
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22605">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:26:51 UTC+03:00">
20:26
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Ну, хоть бы минимизировать выбросы. А то сейчас GC встревает в случайные моменты времени.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22606">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:39:07 UTC+03:00">
20:39
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
так это тоже надо тестить
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22607">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:39:31 UTC+03:00">
20:39
       </div>

       <div class="text">
gc в реальности тоже будет встревать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22608">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:43:40 UTC+03:00">
20:43
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Первый тест поработал активно с кучей, второй с ней почти не работает, но тупит, так как GC убирает мусор после первого.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22609">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:50:53 UTC+03:00">
20:50
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
в реальности то будет как во втором?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22610">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:52:25 UTC+03:00">
20:52
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
В реальности будет лишь один из вариантов.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22611">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:52:55 UTC+03:00">
20:52
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
он же не на холодную будет запускаться
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22612">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 20:53:27 UTC+03:00">
20:53
       </div>

       <div class="text">
т.е. обычно прога работает в условиях фрагментации памяти
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22613">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:04:16 UTC+03:00">
21:04
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну для этого запускай тесты в случайном порядке
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22614">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:06:51 UTC+03:00">
21:06
       </div>

       <div class="text">
но сейчас гц довольно умный. если алгоритм не сильно запутанно создает обьекты то он успевает очистить память еще до захода в след итерацию цикла
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22615">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:18:37 UTC+03:00">
21:18
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22612" onclick="return GoToMessage(22612)">this message</a>
       </div>

       <div class="text">
Это случайный фактор, который только мешает понять какой алгоритм быстрее.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22616">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:22:07 UTC+03:00">
21:22
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а если с профайлером запускать?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22617">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:23:32 UTC+03:00">
21:23
       </div>

       <div class="text">
Tip: It&apos;s a good practice to start and end your recording with a forced garbage collection. Click the collect garbage button (force garbage collection button) while recording to force garbage collection.<br><br><a href="https://developers.google.com/web/tools/chrome-devtools/memory-problems/">https://developers.google.com/web/tools/chrome-devtools/memory-problems/</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22618">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:38:50 UTC+03:00">
21:38
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Вот такая тулза у меня пока получилась:<br><a href="http://mol.js.org/app/jsperf/-/#sources=%5B%22class%20Aggregate%7B%23%7D%20%7B%5Cn%20%20%20%20constructor%28%29%20%7B%20this.array%20%3D%20%5B1%5D%20%7D%5Cn%20%20%20%20push%28%20item%20%29%20%7B%20return%20this.array.push%28%20item%20%29%20%7D%5Cn%20%20%20%20indexOf%28%20item%20%29%20%7B%20return%20this.array.indexOf%28%20item%20%29%20%7D%5Cn%7D%5Cn%7B%7B%5Cn%5Ctconst%20array%7B%23%7D%20%3D%20new%20Aggregate%5Cn%5Ctfor%28%20let%20i%20%3D%200%20%3B%20i%20%3C%201000%20%3B%20%2B%2Bi%20%29%20array%7B%23%7D.push%28%20i%20%29%5Cn%7D%7D%5Cn%5Cn%22%2C%22class%20Inherit%7B%23%7D%20extends%20Array%20%7B%5Cn%20%20%20%20constructor%28%29%20%7B%20super%28%29%3B%20this%5B0%5D%20%3D%201%20%7D%5Cn%7D%5Cn%7B%7B%5Cn%5Ctconst%20array%7B%23%7D%20%3D%20new%20Inherit%5Cn%5Ctfor%28%20let%20i%20%3D%200%20%3B%20i%20%3C%201000%20%3B%20%2B%2Bi%20%29%20array%7B%23%7D.push%28%20i%20%29%5Cn%7D%7D%5Cn%5Cn%22%5D">http://mol.js.org/app/jsperf/-/#sources=%5B%22class%20Aggregate%7B%23%7D%20%7B%5Cn%20%20%20%20constructor%28%29%20%7B%20this.array%20%3D%20%5B1%5D%20%7D%5Cn%20%20%20%20push%28%20item%20%29%20%7B%20return%20this.array.push%28%20item%20%29%20%7D%5Cn%20%20%20%20indexOf%28%20item%20%29%20%7B%20return%20this.array.indexOf%28%20item%20%29%20%7D%5Cn%7D%5Cn%7B%7B%5Cn%5Ctconst%20array%7B%23%7D%20%3D%20new%20Aggregate%5Cn%5Ctfor%28%20let%20i%20%3D%200%20%3B%20i%20%3C%201000%20%3B%20%2B%2Bi%20%29%20array%7B%23%7D.push%28%20i%20%29%5Cn%7D%7D%5Cn%5Cn%22%2C%22class%20Inherit%7B%23%7D%20extends%20Array%20%7B%5Cn%20%20%20%20constructor%28%29%20%7B%20super%28%29%3B%20this%5B0%5D%20%3D%201%20%7D%5Cn%7D%5Cn%7B%7B%5Cn%5Ctconst%20array%7B%23%7D%20%3D%20new%20Inherit%5Cn%5Ctfor%28%20let%20i%20%3D%200%20%3B%20i%20%3C%201000%20%3B%20%2B%2Bi%20%29%20array%7B%23%7D.push%28%20i%20%29%5Cn%7D%7D%5Cn%5Cn%22%5D</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22619">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:41:17 UTC+03:00">
21:41
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
{#}  - а зачем суффикс?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22620">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:41:27 UTC+03:00">
21:41
       </div>

       <div class="text">
в замыкании нельзя запускать?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22621">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:42:19 UTC+03:00">
21:42
       </div>

       <div class="text">
весь блок создается много раз, а не содержимое дублируется
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22622">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:48:42 UTC+03:00">
21:48
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Я копирую кусок исходника, чтобы компилятор не смог соптимизиовать.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22623">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:50:13 UTC+03:00">
21:50
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
так можно скопировать обернуть в лямбду или он тоже оптимизирует так?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22624">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:50:59 UTC+03:00">
21:50
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Лямбда влияет на время исполнения.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22625">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:51:27 UTC+03:00">
21:51
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
константа, не?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22626">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:54:45 UTC+03:00">
21:54
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Что константа?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22627">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:54:59 UTC+03:00">
21:54
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
лямбда
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22628">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 21:57:36 UTC+03:00">
21:57
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Что лямбда? Я не умею мысли читать.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22629">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:00:37 UTC+03:00">
22:00
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22624" onclick="return GoToMessage(22624)">this message</a>
       </div>

       <div class="text">
эта
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22630">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:01:04 UTC+03:00">
22:01
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Примечательно, что в моём бенчмарке наследование от нативного массива даёт не такую колоссальную разницу, как на <a href="jsperf.com">jsperf.com</a>: <a href="https://jsperf.com/argegate-vs-inherit-native-rw">https://jsperf.com/argegate-vs-inherit-native-rw</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22631">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:01:08 UTC+03:00">
22:01
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
влияние лямбды, если каждый кейс оборачивать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22632">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:01:55 UTC+03:00">
22:01
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22630" onclick="return GoToMessage(22630)">this message</a>
       </div>

       <div class="text">
и кому верить? =)
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22633">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:02:24 UTC+03:00">
22:02
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Тут влияние лямбды будет будет больше, чем измеряемый код:<br><a href="http://mol.js.org/app/jsperf/-/#sources=%5B%22with%28%7B%20foo%20%3A%20777%20%7D%29%20%7B%5Cn%5Ct%7B%7B%5Cn%5Ct%5Ctfoo%3B%5Cn%5Ct%7D%7D%5Cn%7D%22%2C%22const%20foo%7B%23%7D%20%3D%20%7B%20bar%20%3A%20777%20%7D%5Cn%7B%7B%5Cn%5Ctfoo.bar%3B%5Cn%7D%7D%22%5D">http://mol.js.org/app/jsperf/-/#sources=%5B%22with%28%7B%20foo%20%3A%20777%20%7D%29%20%7B%5Cn%5Ct%7B%7B%5Cn%5Ct%5Ctfoo%3B%5Cn%5Ct%7D%7D%5Cn%7D%22%2C%22const%20foo%7B%23%7D%20%3D%20%7B%20bar%20%3A%20777%20%7D%5Cn%7B%7B%5Cn%5Ctfoo.bar%3B%5Cn%7D%7D%22%5D</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22634">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:03:33 UTC+03:00">
22:03
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22632" onclick="return GoToMessage(22632)">this message</a>
       </div>

       <div class="text">
Проверил через console.time - разница между реализациями в 2 раза, как у меня.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22635">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:30:27 UTC+03:00">
22:30
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
А тут, например, видно, что когда CallbackOutside инлайнится, то он чуть быстрее, чем ConcreteArgument. А когда не инлайнится, то драмматически медленнее: <a href="http://mol.js.org/app/jsperf/-/#sources=%5B%22class%20ConcreteArguments%7B%23%7D%20%7B%5Cn%20%20%20%20constructor%28%20foo%20%2C%20bar%20%29%20%7B%5Cn%20%20%20%20%20%20%20%20this.foo%20%3D%20foo%5Cn%20%20%20%20%20%20%20%20this.bar%20%3D%20bar%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%7B%7B%20new%20ConcreteArguments%28%20%28%29%3D%3E%20window%2C%20%28%29%3D%3E%20r.foo%28%29%20%29%3B%20%7D%7D%22%2C%22class%20CallbackOutside%7B%23%7D%20%7B%5Cn%20%20%20%20static%20make%28%20init%20%29%20%7B%5Cn%20%20%20%20%20%20%20%20const%20obj%20%3D%20new%20this%5Cn%20%20%20%20%20%20%20%20if%28%20init%20%29%20init%28%20obj%20%29%5Cn%20%20%20%20%20%20%20%20return%20obj%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%7B%7B%20CallbackOutside.make%28%20obj%20%3D%3E%20%7B%20obj.foo%20%3D%20%28%29%3D%3E%20foo%20%3B%20obj.bar%20%3D%20%28%29%3D%3E%20obj.foo%28%29%20%7D%20%29%3B%20%7D%7D%22%2C%22class%20CallbackOutside%7B%23%7D%20%7B%5Cn%20%20%20%20static%20make%28%20init%20%29%20%7B%5Cn%20%20%20%20%20%20%20%20const%20obj%20%3D%20new%20this%5Cn%20%20%20%20%20%20%20%20if%28%20init%20%29%20init%28%20obj%20%29%5Cn%20%20%20%20%20%20%20%20return%20obj%5Cn%20%20%20%20%7D%5Cn%7D%5Cnfunction%20make%7B%23%7D%28%29%7B%5Cn%5Ctreturn%20CallbackOutside.make%28%20obj%20%3D%3E%20%7B%20obj.foo%20%3D%20%28%29%3D%3E%20window%3B%20obj.bar%20%3D%20%28%29%3D%3E%20obj.foo%28%29%20%7D%20%29%5Cn%7D%5Cn%7B%7B%20make%28%29%3B%20%7D%7D%5Cn%5Cn%22%2C%22class%20ConcreteArguments%7B%23%7D%20%7B%5Cn%20%20%20%20constructor%28%20foo%20%2C%20bar%20%29%20%7B%5Cn%20%20%20%20%20%20%20%20this.foo%20%3D%20foo%5Cn%20%20%20%20%20%20%20%20this.bar%20%3D%20bar%5Cn%20%20%20%20%7D%5Cn%7D%5Cnfunction%20make%7B%23%7D%28%29%7B%5Cn%5Ctreturn%20new%20ConcreteArguments%28%20%28%29%3D%3E%20window%2C%20%28%29%3D%3E%20r.foo%28%29%20%29%5Cn%7D%5Cn%7B%7B%20make%28%29%3B%20%7D%7D%5Cn%5Cn%22%5D">http://mol.js.org/app/jsperf/-/#sources=%5B%22class%20ConcreteArguments%7B%23%7D%20%7B%5Cn%20%20%20%20constructor%28%20foo%20%2C%20bar%20%29%20%7B%5Cn%20%20%20%20%20%20%20%20this.foo%20%3D%20foo%5Cn%20%20%20%20%20%20%20%20this.bar%20%3D%20bar%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%7B%7B%20new%20ConcreteArguments%28%20%28%29%3D%3E%20window%2C%20%28%29%3D%3E%20r.foo%28%29%20%29%3B%20%7D%7D%22%2C%22class%20CallbackOutside%7B%23%7D%20%7B%5Cn%20%20%20%20static%20make%28%20init%20%29%20%7B%5Cn%20%20%20%20%20%20%20%20const%20obj%20%3D%20new%20this%5Cn%20%20%20%20%20%20%20%20if%28%20init%20%29%20init%28%20obj%20%29%5Cn%20%20%20%20%20%20%20%20return%20obj%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%7B%7B%20CallbackOutside.make%28%20obj%20%3D%3E%20%7B%20obj.foo%20%3D%20%28%29%3D%3E%20foo%20%3B%20obj.bar%20%3D%20%28%29%3D%3E%20obj.foo%28%29%20%7D%20%29%3B%20%7D%7D%22%2C%22class%20CallbackOutside%7B%23%7D%20%7B%5Cn%20%20%20%20static%20make%28%20init%20%29%20%7B%5Cn%20%20%20%20%20%20%20%20const%20obj%20%3D%20new%20this%5Cn%20%20%20%20%20%20%20%20if%28%20init%20%29%20init%28%20obj%20%29%5Cn%20%20%20%20%20%20%20%20return%20obj%5Cn%20%20%20%20%7D%5Cn%7D%5Cnfunction%20make%7B%23%7D%28%29%7B%5Cn%5Ctreturn%20CallbackOutside.make%28%20obj%20%3D%3E%20%7B%20obj.foo%20%3D%20%28%29%3D%3E%20window%3B%20obj.bar%20%3D%20%28%29%3D%3E%20obj.foo%28%29%20%7D%20%29%5Cn%7D%5Cn%7B%7B%20make%28%29%3B%20%7D%7D%5Cn%5Cn%22%2C%22class%20ConcreteArguments%7B%23%7D%20%7B%5Cn%20%20%20%20constructor%28%20foo%20%2C%20bar%20%29%20%7B%5Cn%20%20%20%20%20%20%20%20this.foo%20%3D%20foo%5Cn%20%20%20%20%20%20%20%20this.bar%20%3D%20bar%5Cn%20%20%20%20%7D%5Cn%7D%5Cnfunction%20make%7B%23%7D%28%29%7B%5Cn%5Ctreturn%20new%20ConcreteArguments%28%20%28%29%3D%3E%20window%2C%20%28%29%3D%3E%20r.foo%28%29%20%29%5Cn%7D%5Cn%7B%7B%20make%28%29%3B%20%7D%7D%5Cn%5Cn%22%5D</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22636">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:31:05 UTC+03:00">
22:31
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ты б с benchmark.js прогнал, может это не просто так отличия
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22637">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:33:51 UTC+03:00">
22:33
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22635" onclick="return GoToMessage(22635)">this message</a>
       </div>

       <div class="text">
Скорее всего дело в том, что в первом кейсе собственно создание объекта инлайнится, а вот создание замыканий - нет.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22638">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:35:06 UTC+03:00">
22:35
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22636" onclick="return GoToMessage(22636)">this message</a>
       </div>

       <div class="text">
Он и используется в <a href="jsperf.com">jsperf.com</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22639">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:51:59 UTC+03:00">
22:51
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
может это фича, а не баг
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22640">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 22:55:30 UTC+03:00">
22:55
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Что?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22641">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:04:44 UTC+03:00">
23:04
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а ты можешь сохранять куда нить на сервак код чтобы ссылки были не такие огромные
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22642">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:05:59 UTC+03:00">
23:05
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22640" onclick="return GoToMessage(22640)">this message</a>
       </div>

       <div class="text">
я, к тому, что надо бы разобраться, почему benchmark дает другие результаты, его долго пилят, наверняка такое б заметили
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22643">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:15:50 UTC+03:00">
23:15
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22641" onclick="return GoToMessage(22641)">this message</a>
       </div>

       <div class="text">
Погда-нибудь у меня будет серверное апи для сохранения таких данных, но пока его нет.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22644">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:16:21 UTC+03:00">
23:16
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а если в gist?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22645">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:17:04 UTC+03:00">
23:17
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
навалом же бесплатного
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22646">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:17:09 UTC+03:00">
23:17
       </div>

       <div class="text">
файрбейз
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22647">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:17:19 UTC+03:00">
23:17
       </div>

       <div class="text">
через рест сохраняешь
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22648">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:17:22 UTC+03:00">
23:17
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22642" onclick="return GoToMessage(22642)">this message</a>
       </div>

       <div class="text">
Потому что он в цикле гоняет, а я код копирую.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22649">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:18:02 UTC+03:00">
23:18
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22646" onclick="return GoToMessage(22646)">this message</a>
       </div>

       <div class="text">
Я пробовал его, не осилил.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22650">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:18:05 UTC+03:00">
23:18
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
сокращатели ссылок всякие
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22651">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:18:20 UTC+03:00">
23:18
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22650" onclick="return GoToMessage(22650)">this message</a>
       </div>

       <div class="text">
Есть с CORS API?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22652">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:18:28 UTC+03:00">
23:18
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да там обычный пост запрос
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22653">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:18:50 UTC+03:00">
23:18
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Нужен CORS.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22654">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:19:00 UTC+03:00">
23:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
файрбейз с корсом
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22655">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:19:22 UTC+03:00">
23:19
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
И авторизацией и ещё какими-то заморочками, я не помню уже.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22656">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:19:37 UTC+03:00">
23:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да нее, ниче не надо там
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22657">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:19:39 UTC+03:00">
23:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а если просто твоей морде скормить gist-ссылку? что б он вытянул сорс и выполнил
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22658">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:20:01 UTC+03:00">
23:20
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
просто сохранил по своему ключу и вытащил
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22659">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:20:10 UTC+03:00">
23:20
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22644" onclick="return GoToMessage(22644)">this message</a>
       </div>

       <div class="text">
Емнип у гитхаба лимиты драконовские.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22660">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:20:52 UTC+03:00">
23:20
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22658" onclick="return GoToMessage(22658)">this message</a>
       </div>

       <div class="text">
И пиши кто хочет куда хочет, что хочет, ага.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22661">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:21:06 UTC+03:00">
23:21
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
тебе то че
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22662">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:21:38 UTC+03:00">
23:21
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22659" onclick="return GoToMessage(22659)">this message</a>
       </div>

       <div class="text">
ты просто хреначишь в гист или куда-либо код, морда его парсит и выполняет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22663">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:21:58 UTC+03:00">
23:21
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22657" onclick="return GoToMessage(22657)">this message</a>
       </div>

       <div class="text">
А редактировать как? Рукаи в гисты пересохранять - не удобно.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22664">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:22:02 UTC+03:00">
23:22
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ты же можешь там правил всяких сделать, типа можно только создать запись без редактирования
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22665">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:22:44 UTC+03:00">
23:22
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22661" onclick="return GoToMessage(22661)">this message</a>
       </div>

       <div class="text">
То, что это так просто не работает. Во всех таких сервисах гайки позакручены.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22666">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:22:54 UTC+03:00">
23:22
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22663" onclick="return GoToMessage(22663)">this message</a>
       </div>

       <div class="text">
редактировать особо и не надо, это расшарить результат что б
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22667">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:23:11 UTC+03:00">
23:23
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
не понимаю про что ты
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22668">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:23:22 UTC+03:00">
23:23
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22664" onclick="return GoToMessage(22664)">this message</a>
       </div>

       <div class="text">
О, вспомнил, когда пытался создать правила - они нифига не работали. Не для людей этот фаербейс.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22669">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:23:41 UTC+03:00">
23:23
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
не правильно наверное создавал
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22670">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:23:56 UTC+03:00">
23:23
       </div>

       <div class="text">
сколько не юзал всегда все работало без сбоев
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22671">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:25:29 UTC+03:00">
23:25
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22666" onclick="return GoToMessage(22666)">this message</a>
       </div>

       <div class="text">
Без редактирования можно и $mol_app_bench использовать. Он работает именно так, как ты описал.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22672">

      <div class="body">

       <div class="pull_right date details" title="27.10.2018 23:27:11 UTC+03:00">
23:27
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22670" onclick="return GoToMessage(22670)">this message</a>
       </div>

       <div class="text">
Значит не сотавит труда прикрутить? <a href="https://github.com/eigenmethod/mol/tree/master/app/jsperf">https://github.com/eigenmethod/mol/tree/master/app/jsperf</a>
       </div>

      </div>

     </div>

     <div class="message service" id="message-412">

      <div class="body details">
28 October 2018
      </div>

     </div>

     <div class="message default clearfix" id="message22673">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 00:23:35 UTC+03:00">
00:23
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
то что ты пересоздаешь каждый раз классы на каждую итерацию, это конечно ты будешь всегда мерить работу интерпретатора, врятли такое будет вообще оптимизироваться
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22674">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 00:29:44 UTC+03:00">
00:29
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Они пересоздаются только для замера outer, что логично.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22675">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 00:33:28 UTC+03:00">
00:33
       </div>

       <div class="text">
Перенёс все варианты создания объектов с биндингами: <a href="https://tinyurl.com/ydglvsyd">https://tinyurl.com/ydglvsyd</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22676">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 00:36:22 UTC+03:00">
00:36
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22597" onclick="return GoToMessage(22597)">this message</a>
       </div>

       <div class="text">
А я когда смотрел доклады про v8 то понял что написание своего бенча это слишком сложная работа, намного сложнее чем разобраться какая скорость и почему тормозить тот или иной код в каждом отдельном случае. И эта сложность заключается в том что нужно раскрутить все ненужные отпимизации v8 в обратную сторону иначе результаты будут неправильные. Вот например в этом докладе <a href="https://www.youtube.com/watch?v=HPFARivHJRY">https://www.youtube.com/watch?v=HPFARivHJRY</a> (и в других докладах Егорова) показывается как бенчи могут выдавать неправильные результаты и нужно пресекать разные оптимизации (но не захолить слишком далеко) чтобы результаты были репрезентативны
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22677">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 00:37:56 UTC+03:00">
00:37
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22676" onclick="return GoToMessage(22676)">this message</a>
       </div>

       <div class="text">
и это только для v8 куча нюансов а ведь нужно учитывать еще и другие js движки
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22678">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 01:36:01 UTC+03:00">
01:36
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Ну, у меня генерится гигантская функция, которую никакой jit не соптимизирует, так что можно быть спокойным касательно баузерной самодеятельности. Надо написать ему письмо 😊
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22679">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 11:29:15 UTC+03:00">
11:29
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а точно jit похожие куски кода не может оптимизировать, если только переменные отличаются?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22680">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 11:31:00 UTC+03:00">
11:31
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
А как он поймёт, что они похожие? Это нетривиальная задача, на которую нет времени - функцию надо запустить как можно раньше. А выполнится она ровно один раз.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22681">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 11:31:31 UTC+03:00">
11:31
       </div>

       <div class="text">
Правда эта огромная функция даёт нагрузку на память.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22682">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:15:19 UTC+03:00">
12:15
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ты будешь мерить во многом само время оптимизации
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22683">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:15:33 UTC+03:00">
12:15
       </div>

       <div class="text">
а оно не быстрое
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22684">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:19:27 UTC+03:00">
12:19
       </div>

       <div class="text">
первые вызовов 100 будут интерпритаторные, потом на оптимизацию пойдет, и может еще успеет пару циклов jit ом прогнать, и потом опять все сначала
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22685">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:23:41 UTC+03:00">
12:23
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Там всего 1 вызов.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22686">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:23:55 UTC+03:00">
12:23
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
надо и так и так мерять, с дублированием и с циклом
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22687">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:24:13 UTC+03:00">
12:24
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Зачем с циклом?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22688">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:24:33 UTC+03:00">
12:24
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
что б оптимизированный алгоритм померять
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22689">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:24:59 UTC+03:00">
12:24
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22675" onclick="return GoToMessage(22675)">this message</a>
       </div>

       <div class="text">
Для этотго достаточно вынести функцию во внешний код, как тут.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22690">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:25:09 UTC+03:00">
12:25
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
в реальности то будут куча запусков одного и тогоже кода
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22691">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:25:57 UTC+03:00">
12:25
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
В реальности есть код, который исполняется один или мало раз, а есть который исполняется часто.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22692">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:28:06 UTC+03:00">
12:28
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
кстати вызов performance now стоит 150нс
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22693">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:28:09 UTC+03:00">
12:28
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
в обоих случаях это один статический участок кода
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22694">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:28:14 UTC+03:00">
12:28
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
это тоже надо учитывать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22695">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:28:32 UTC+03:00">
12:28
       </div>

       <div class="text">
очень много операций стоят меньше 20нс
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22696">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:29:13 UTC+03:00">
12:29
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22692" onclick="return GoToMessage(22692)">this message</a>
       </div>

       <div class="text">
На фоне целевых для замера 100ms это не существенная погрешность.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22697">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:30:12 UTC+03:00">
12:30
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну ты ведь в каждую итерацию цикла его вставляешь, чтобы отделить outer от inner
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22698">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:30:36 UTC+03:00">
12:30
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22633" onclick="return GoToMessage(22633)">this message</a>
       </div>

       <div class="text">
Ну да, вот тут взятие свойства - около 10нс.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22699">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:31:05 UTC+03:00">
12:31
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22697" onclick="return GoToMessage(22697)">this message</a>
       </div>

       <div class="text">
Нет, конечно. Да и циклов у меня нет.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22700">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:31:31 UTC+03:00">
12:31
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну а как ты отделяешь их?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22701">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:32:06 UTC+03:00">
12:32
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Отдельно замеряю время внешнего кода, потом просто вычитаю его.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22702">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:32:10 UTC+03:00">
12:32
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ты же прогоняешь тест много много раз чтобы среднее вычислить
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22703">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:32:44 UTC+03:00">
12:32
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
он генерит 100500 кусков кода
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22704">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:33:06 UTC+03:00">
12:33
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну каждый кусок надо померять же
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22705">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:33:39 UTC+03:00">
12:33
       </div>

       <div class="text">
и может оказаться что сам кусок работает меньше времени чем замер времени
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22706">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:33:41 UTC+03:00">
12:33
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
хз, по мне достаточно все куски сразу
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22707">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:34:46 UTC+03:00">
12:34
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
т е сначала создать стопицот классов, сохранить их в переменную, а потом второй итерацией прогонять их иннеры?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22708">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:35:27 UTC+03:00">
12:35
       </div>

       <div class="text">
с таким подходом гц задыхаться начнет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22709">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:36:30 UTC+03:00">
12:36
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а почему? тут память то только берется, не освобождается до конца
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22710">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:36:30 UTC+03:00">
12:36
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22706" onclick="return GoToMessage(22706)">this message</a>
       </div>

       <div class="text">
Именно так, измеряем общее время, делим на число копипаст.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22711">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:36:36 UTC+03:00">
12:36
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
надо создать класс, замерить его время, выполнить его иннер и все выбросить сразу же
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22712">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:36:50 UTC+03:00">
12:36
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22707" onclick="return GoToMessage(22707)">this message</a>
       </div>

       <div class="text">
Для иннеров внешний код создаётся один раз.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22713">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:37:04 UTC+03:00">
12:37
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
гс дергается, когда память освобождается, зачем ее освобождать, пусть хоть 5 гигов жрет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22714">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:37:52 UTC+03:00">
12:37
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22713" onclick="return GoToMessage(22713)">this message</a>
       </div>

       <div class="text">
Когда запрашивается он дёргается же, если в хипе мало места.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22715">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:37:54 UTC+03:00">
12:37
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так есть лимит памяти когда гц просто начинает супер усиленно работать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22716">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:38:31 UTC+03:00">
12:38
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
откуда мусор то появится в памяти, что б его собирать?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22717">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:38:52 UTC+03:00">
12:38
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
переменные
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22718">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:39:03 UTC+03:00">
12:39
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Для того GC и запускается, чтобы узнать нет ли мусора, который можно собрать.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22719">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:39:04 UTC+03:00">
12:39
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
обьекты
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22720">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:39:14 UTC+03:00">
12:39
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
если все создать до тестов?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22721">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:39:37 UTC+03:00">
12:39
       </div>

       <div class="text">
в реальности правда так не будет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22722">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:39:47 UTC+03:00">
12:39
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
гц будет обходить все дерево обьектов в поисках что можео удалить
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22723">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:40:05 UTC+03:00">
12:40
       </div>

       <div class="text">
чем больше и сложнее граф тем дольше
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22724">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:42:07 UTC+03:00">
12:42
       </div>

       <div class="text">
поэтому всякие посточистки обьекта от других ссылок на обьекты иногда ускоряют работу гц
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22725">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:42:39 UTC+03:00">
12:42
       </div>

       <div class="text">
типа atom.masters=null
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22726">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:57:38 UTC+03:00">
12:57
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а что является триггером, который gc активирует?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22727">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:58:06 UTC+03:00">
12:58
       </div>

       <div class="text">
вот если память один раз выделилась, не освобождается и не потребляется - гц будет работать?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22728">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 12:58:56 UTC+03:00">
12:58
       </div>

       <div class="text">
или такой ситуации нельзя добиться, не задетектить, что память не освобождается
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22729">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:24:25 UTC+03:00">
13:24
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
прочекал как v8 делает пороги по размерам массивов<br>получились такие:<br>17,43,82,140,227,358,554...<br><br>это значит что когда добавляешь первый элемент в массив - v8 предсоздаст 17 пустых позиций,<br>если они заполнятся, тогда весь массив переедет в новое место в памяти с 43 ячейками и тд<br>соответственно перемещаться внутри этих ячеек через push и pop стоит вообще копейки
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22730">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:25:16 UTC+03:00">
13:25
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а если length обнулить, его gc грохнет?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22731">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:27:30 UTC+03:00">
13:27
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
array.length реально угрохает длину массива до указанного, не знаю переезжает ли он на новое место
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22732">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:27:57 UTC+03:00">
13:27
       </div>

       <div class="text">
а вот поп просто указатель будет двигать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22733">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:28:16 UTC+03:00">
13:28
       </div>

       <div class="text">
поэтому лучше его юзать если планируется потом еще раз добавлять элементы
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22734">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:28:29 UTC+03:00">
13:28
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
pop тоже может для gc освободить
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22735">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:28:39 UTC+03:00">
13:28
       </div>

       <div class="text">
после кучи pop не включится gc?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22736">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:28:57 UTC+03:00">
13:28
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
гс включит только для удаленных элементов
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22737">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:29:08 UTC+03:00">
13:29
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
не, для релока массива
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22738">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:29:10 UTC+03:00">
13:29
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну в смысле поп просто присвоит ячейке null
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22739">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:29:23 UTC+03:00">
13:29
       </div>

       <div class="text">
и сдвинет указатель влево
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22740">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:29:33 UTC+03:00">
13:29
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
т.е. релока не будет?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22741">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:29:37 UTC+03:00">
13:29
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
неа
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22742">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:31:30 UTC+03:00">
13:31
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
с мастерами то не надо pop делать, т.к. многопоточность, надо грохать массив, когда никто не юзает его
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22743">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:32:05 UTC+03:00">
13:32
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну это полезно там где надо урезать например размер массива в мастерах или слейвах
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22744">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:32:11 UTC+03:00">
13:32
       </div>

       <div class="text">
после удаления
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22745">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:32:22 UTC+03:00">
13:32
       </div>

       <div class="text">
лучше заюзать поп, чем length
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22746">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:32:57 UTC+03:00">
13:32
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
нельзя урезать, т.к. calc может приостановиться и другой поток накидает в массив своего
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22747">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:33:10 UTC+03:00">
13:33
       </div>

       <div class="text">
и массив можно общий делать на всех
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22748">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:37:45 UTC+03:00">
13:37
       </div>

       <div class="text">
<pre> ...<br>        // assert(this.status === CellStatus.COMPUTE || this.status === CellStatus.OBSOLETE)<br>        if (this.status === CellStatus.OBSOLETE) {<br>            this.indexStart = statuses.length<br>            stausesUsed++<br>            for (let master of this.masters) {<br>                master.statusIndex = statuses.length<br>                statuses.push(0)<br>            }<br>            this.status = CellStatus.COMPUTE<br>        }<br><br>        // assert(this.status === CellStatus.COMPUTE)<br><br>        const result = this.calculate()<br><br>        let index = this.indexStart<br>        const masters = this.masters<br>        let i = 0<br>        let len = masters.length<br>        for (; i &lt; masters.length; i++) {<br>            if (statuses[index++] === 0 &amp;&amp; len &gt; 0) {<br>              masters[i] = masters[++i]<br>              len--<br>            }<br>        }<br>        masters.length = len<br>        stausesUsed--<br>        if (stausesUsed === 0) statuses.length = 0</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22749">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:38:59 UTC+03:00">
13:38
       </div>

       <div class="text">
пока не понял, как без statusIndex и без indexStart сделать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22751">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:44:19 UTC+03:00">
13:44
       </div>

       <div class="text">
в мастере: statuses[this.statusIndex] = 1
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22752">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:45:04 UTC+03:00">
13:45
       </div>

       <div class="text">
только вот наверное придется master.statusIndex каждый раз перез calc восстанавливать, не получится оптимизировать для COMPUTE
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22753">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:45:50 UTC+03:00">
13:45
       </div>

       <div class="text">
Set меняется на массив ценой добавления 2х интов
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22754">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:55:54 UTC+03:00">
13:55
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
че кстати ассерты жалеешь? в комментах пишешь, пиши чтобы прям в коде были, чтобы падало все как можно раньше если что то идет не так
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22755">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:56:17 UTC+03:00">
13:56
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
лишние колы
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22756">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:56:50 UTC+03:00">
13:56
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
заверни внутри в if (!production)
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22757">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:57:08 UTC+03:00">
13:57
       </div>

       <div class="text">
v8 если увидит некую константу все равно выпилит их всех
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22758">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 13:57:32 UTC+03:00">
13:57
       </div>

       <div class="text">
и сможешь одной переменной управлять дебаг модом
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22759">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:00:00 UTC+03:00">
14:00
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
можно да, обычно прод режим - это хардкор, там где каждый тик важен
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22760">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:00:22 UTC+03:00">
14:00
       </div>

       <div class="text">
в жаве той же дев сборки выкатывают на прод, т.к. гораздо легче разгребать трейсы потом
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22761">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:00:47 UTC+03:00">
14:00
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
трейсы разгребать через сормапы
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22762">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:01:54 UTC+03:00">
14:01
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
не, есть еще динамическая инфа, есть ассерты
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22763">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:06:01 UTC+03:00">
14:06
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну в проде гонять ассерты так себе идея, херово тестировали значит))
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22764">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:06:23 UTC+03:00">
14:06
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
баги есть всегда, тем более в такой сложной штуке
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22765">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:17:25 UTC+03:00">
14:17
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22749" onclick="return GoToMessage(22749)">this message</a>
       </div>

       <div class="text">
это что за участок кода то?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22766">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:18:00 UTC+03:00">
14:18
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
вычисление в слейве, тот же что у тебя в примере был
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22767">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:18:38 UTC+03:00">
14:18
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а ты можешь его своими словами описать, код тяжело понять
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22768">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:19:29 UTC+03:00">
14:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
разница в том, что calc может прерываться, бросая throw promise и до следующего запуска с мастерами может кто-то другой поработать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22769">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:21:33 UTC+03:00">
14:21
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так ты сохраняешь же до калка все статусы, после прерывания или окончания работы ты восстанавливаешь все
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22770">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:23:24 UTC+03:00">
14:23
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
<pre>        let statusesIndex = statuses.length<br>        for (let master of this.masters) {<br>            master.statusIndex = statuses.length<br>            statuses.push(0)<br>        }<br><br>        try {<br>            this.push(this.calculate())<br>            const masters = this.masters<br>            let len = masters.length<br>            for (let i = 0; i &lt; masters.length; i++) {<br>                if (statuses.pop() === 0) {<br>                    if (i + 1 &lt; masters.length) masters[i] = masters[++i]<br>                    len--<br>                }<br>            }<br>            masters.length = len<br>        } finally {<br>            statuses.length = statusesIndex<br>        }</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22771">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:23:58 UTC+03:00">
14:23
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
не понимаю зачем ты делаешь <br><pre>master.statusIndex = statuses.length<br>            statuses.push(0)</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22772">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:24:03 UTC+03:00">
14:24
       </div>

       <div class="text">
опиши код своими словами
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22773">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:24:39 UTC+03:00">
14:24
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
master:<br><pre>    value(next?: Next): Value {<br>        statuses[this.statusIndex] = 1<br> ...</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22774">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:24:55 UTC+03:00">
14:24
       </div>

       <div class="text">
что б понять, использовался мастер или нет
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22775">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:25:47 UTC+03:00">
14:25
       </div>

       <div class="text">
слейв выделяет массив статусов, записывает туда 0, и передает индексы мастерам, что б те, когда их вызвали проставили в массив 1
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22776">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:26:17 UTC+03:00">
14:26
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну ты пошел сложным путем
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22777">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:28:24 UTC+03:00">
14:28
       </div>

       <div class="text">
сделай глобальный runId++;<br>и проставь перед вызовом калка всем мастерам status = runId<br>а в гете мастере проверяей что если status===runId то мы уже в мастерах, если нет то добавляемся
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22778">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:28:43 UTC+03:00">
14:28
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
иначе проблему со внуками не решить
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22779">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:30:08 UTC+03:00">
14:30
       </div>

       <div class="text">
статус перезапишет мастер мастера
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22780">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:30:22 UTC+03:00">
14:30
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так ты потом вернешь же его
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22781">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:30:59 UTC+03:00">
14:30
       </div>

       <div class="text">
после окончания калка, ты вернешь все статусы которые поменял
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22782">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:32:31 UTC+03:00">
14:32
       </div>

       <div class="text">
для этого мы и завели же массив, в который перед калком пишем все текущие статусы всех мастеров, а после возвращаем все назад
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22783">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:35:08 UTC+03:00">
14:35
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а, ты просто текущие статусы мастеров сохранять предлагаешь, а в finally восстанавливать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22784">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:36:12 UTC+03:00">
14:36
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22785">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:36:43 UTC+03:00">
14:36
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
надо подумать, мне кажется вообще никакая схема не будет с перезапусками работать.<br><br>т.к. мастер-атом может быть в файбере, если при первом запуске файбер его закэширует, то перезапуск calc не тронет статус мастера и он выпилится из слейва
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22786">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:37:41 UTC+03:00">
14:37
       </div>

       <div class="text">
т.е. надо помнить смену статусов  мастеров  с 0 на 1на протяжении всех перезапусков, пока слейв вычисляется
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22787">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:38:07 UTC+03:00">
14:38
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я не знаю как работают файберы с атомами, ничего не могу сказать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22788">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:38:31 UTC+03:00">
14:38
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
они просто throw кидают каждый 16мс
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22789">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:38:43 UTC+03:00">
14:38
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну тогда проблем нет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22790">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:38:56 UTC+03:00">
14:38
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
и кэшат результат, если тот вычислился
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22791">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:39:16 UTC+03:00">
14:39
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
просто будет отписка тех мастеров кто не успел запуститься
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22792">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:40:11 UTC+03:00">
14:40
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
первый запуск - мастер заюзался, потом throw, второй запуск - вычисление с мастером взялось из кэша и мастер отписался, а не должен по идее
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22793">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:40:47 UTC+03:00">
14:40
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
зачем отписался?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22794">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:41:10 UTC+03:00">
14:41
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
он не заюзался, мыж перед calc сбросили ему статус
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22795">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:41:25 UTC+03:00">
14:41
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а почему не заюзался? потому что файберы?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22796">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:41:32 UTC+03:00">
14:41
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
да, кэш
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22797">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:41:52 UTC+03:00">
14:41
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну тогда не знаю, по моему мастеры должны всегда юзаться, тем более атомы это итак кэш
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22798">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:42:32 UTC+03:00">
14:42
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
return this._cache ||this._cache = fetch(&apos;<a href="" onclick="return ShowBotCommand(&quot;bla&quot;)">/bla</a>&apos; + someMaster.get())
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22799">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:43:41 UTC+03:00">
14:43
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну _cache надо реактивным делать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22800">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:44:16 UTC+03:00">
14:44
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
fetch под файбером, файбер кэшит значение промиса, когда тот вычислится, а до тех пор делает throw promise
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22801">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:44:49 UTC+03:00">
14:44
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ок, ладно, я в такое уже лезть не хочу))
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22802">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 14:50:16 UTC+03:00">
14:50
       </div>

       <div class="text">
я все равно считаю все эти файберы бессмысленной затеей, оверхеда от них столько, бойлерплейта, по памяти и исполнению, что смысл теряется в них<br>а 60 фпс все равно можно и не добиться, ибо лейаут после изменений может уйти далеко за 8 мс, а его прервать ты уже не сможешь
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22803">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 17:49:32 UTC+03:00">
17:49
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
Без файберов, нужен кэш вычислений, тот же фетч обернуть, атом тут избыточен
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22804">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 18:03:02 UTC+03:00">
18:03
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
делов уж там, для асинхронных вещей просто обертка с атомом, типа<br><pre>function fromPromise(promise) {<br>    var atom = new Atom();<br>    var done = false;<br>    promise.then(data =&gt; {<br>        done = true;<br>        atom.set(data);<br>    });<br>    return () =&gt; {<br>        var value = atom.get();<br>        if (!done) throw promise;<br>        return value;<br>    };<br>}<br><br>var fetchedData = fromPromise(fetch(&apos;something&apos;));<br><br>fetchedData(); // где хотим юзать</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22805">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 18:10:53 UTC+03:00">
18:10
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
В том то и дело, не хочется тут атом, не нужна тут реактивность
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22806">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 18:11:31 UTC+03:00">
18:11
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Тут проблема в том, что при обновлении будут отписки от всего, на что будет подписка после запроса, а это может быть пол приложения. Поэтому квантование мне не удалось прикрутить к атомам напрямую.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22807">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 18:25:32 UTC+03:00">
18:25
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
Можно запоминать переключения между перезапусками
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22808">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 18:45:42 UTC+03:00">
18:45
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
<pre>        if (this.status === CellStatus.OBSOLETE) {<br>            this.indexStart = statuses.length<br>            for (let master of this.masters) {<br>                master.statusIndex = statuses.length<br>                statuses.push(0)<br>            }<br>            statusesUsed++<br>        } else {<br>            let index = this.indexStart<br>            for (let master of this.masters) {<br>                master.statusIndex = index<br>                index++<br>            }<br>        }<br><br>        // assert(this.status === CellStatus.COMPUTE)<br><br>        this.push(this.calculate())<br><br>        const masters = this.masters<br>        let len = masters.length<br>        let index = this.indexStart<br>        for (let i = 0; i &lt; masters.length; i++) {<br>            if (statuses[index++] === 0) {<br>                if (i + 1 &lt; masters.length) masters[i] = masters[++i]<br>                len--<br>            }<br>        }<br>        masters.length = len<br><br>        this.indexStart = 0<br>        statusesUsed--<br>        if (statusesUsed === 0) {<br>            statuses.length = 0<br>        }</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22809">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 18:46:19 UTC+03:00">
18:46
       </div>

       <div class="text">
схема с 2мя интами должна работать
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22810">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 18:51:54 UTC+03:00">
18:51
       </div>

       <div class="text">
1. при первом вычислении слейва - увеличиваем счетчик использований массива статусов, запоминаем текущую позицию в массиве статусов и выделяем память под статусы<br>2. присваиваем мастерам индексы статусов в массиве, при перезапуске с этого пункта начинаем<br>3. когда перезапусков больше нет, все вычислилось - мы проверяем статусы и сдвигаем мастера<br>4. уменьшаем счетчик использований массива статусов, если никто больше не использует - грохаем массив
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22811">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 18:54:19 UTC+03:00">
18:54
       </div>

       <div class="text">
пока слейв вычисляется - он накапливает информацию о вызванных мастерах и не важно сколько перезапусков прошло
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22812">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 20:42:23 UTC+03:00">
20:42
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
дим, а если ошибка произошла в процессе вычисления, слейв должен подписаться на мастера, которые успели вычислилиться до этого?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22813">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 20:51:12 UTC+03:00">
20:51
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Очевидно, что да, иначе он не сможет восстановиться. Возможно и отписываться от прошлых не должен, чтобы они не самоуничтожились.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22814">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 20:51:44 UTC+03:00">
20:51
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
от прошлых само собой, я про новые
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22815">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 20:52:12 UTC+03:00">
20:52
       </div>

       <div class="text">
почему очевидно - calc сбойнул, по идее все изменения во время его вычисления должны отменяться
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22816">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 20:53:32 UTC+03:00">
20:53
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Вообще не очевидно. Прикладной программист может перехватить ошибку и сделать откат, если нужна такая логика.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22817">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 20:54:46 UTC+03:00">
20:54
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а отписываться должны?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22818">

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 20:55:19 UTC+03:00">
20:55
       </div>

       <div class="text">
slave запросил m1, m2<br>при запросе m1 произошла ошибка, от m2 надо отписываться?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22819">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 20:58:53 UTC+03:00">
20:58
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Думаю нет. Если потом ошибки не станет, то нужно будет снова поднимать пол приложения.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22820">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 21:42:44 UTC+03:00">
21:42
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а в put надо связи эти строить? если я у слейва вызвал put, надо его с мастерами связывать или рвать связи? вроде нет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22821">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="28.10.2018 21:44:07 UTC+03:00">
21:44
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Пут вообще не должен пересекаться с пулом.
       </div>

      </div>

     </div>

     <div class="message service" id="message-413">

      <div class="body details">
29 October 2018
      </div>

     </div>

     <div class="message default clearfix" id="message22822">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 01:56:20 UTC+03:00">
01:56
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
<a href="https://gist.github.com/zerkalica/4eb44b0867b9c3fbb008501782d37d22">https://gist.github.com/zerkalica/4eb44b0867b9c3fbb008501782d37d22</a><br>сделал на массивах slaves/masters, вот только имеет ли смысл slaves удалять отложенно не в момент master.dislead, а в момент любых других операций со слейвами.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22823">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 05:51:43 UTC+03:00">
05:51
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Ну, если не удалять сразу, то память не будет освобождаться.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22824">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 09:34:44 UTC+03:00">
09:34
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
Будет, если мы обратились к мастеру с удаленными слейвами или если ручное gc сработает
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22825">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 09:56:04 UTC+03:00">
09:56
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
смысл не удалять на dislead - это что б сложность была не n^2
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22826">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:26:55 UTC+03:00">
10:26
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
чет я погонял тестов<br>на примере одного единорога который будет в каждом атоме калькуляторе мастером сидеть<br>и все они то подписываются на этот единорог, то отписываются (тестил 10,100,1000,10000 слейвов)<br><br>создание slavesToDelete<br>и простой поиск indexof с удалением
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22828">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:40:36 UTC+03:00">
10:40
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
push and... это че такое?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22829">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:41:27 UTC+03:00">
10:41
       </div>

       <div class="text">
заметь, я не создаю массив, просто в конец слейвов захреначиваю и индекс выставляю
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22830">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:41:53 UTC+03:00">
10:41
       </div>

       <div class="text">
+ мало indexOf, надо еще splice делать каждый раз
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22831">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:43:11 UTC+03:00">
10:43
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ладно, отбой, неправильно indexof искал
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22832">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:43:29 UTC+03:00">
10:43
       </div>

       <div class="text">
я тоже в конец добавляю
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22833">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:43:52 UTC+03:00">
10:43
       </div>

       <div class="text">
сплайс не надо, надо с конца перетащить на найденное место
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22834">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:44:45 UTC+03:00">
10:44
       </div>

       <div class="media_wrap clearfix">

        <div class="media clearfix pull_left media_photo">

         <div class="fill pull_left">

         </div>

         <div class="body">

          <div class="title bold">
Photo
          </div>

          <div class="description">
Not included, change data exporting settings to download.
          </div>

          <div class="status details">
1142×144, 22.3 KB
          </div>

         </div>

        </div>

       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22835">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:45:41 UTC+03:00">
10:45
       </div>

       <div class="text">
на больших массивах indexof просто загибается
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22836">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:48:15 UTC+03:00">
10:48
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
у меня рассчет на то, что master не будет дергаться после каждого dislead
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22837">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:48:43 UTC+03:00">
10:48
       </div>

       <div class="text">
но не уверен, что эта ситуация будет часто
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22838">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:54:46 UTC+03:00">
10:54
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну по другому наверное и не выйдет, слейвы должны быть всегда актуальны при добавлении к ним
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22839">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 10:57:53 UTC+03:00">
10:57
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
если отдельный массив делать для slavesToDelete, то можно еще чуть оптимизировать, только в момент push, restart.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22840">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 11:00:10 UTC+03:00">
11:00
       </div>

       <div class="text">
сейчас при вызове value, надо slave записать в конец, но там могут быть слейвы на удаление, поэтому сперва происходит их удаление
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22841">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 11:10:27 UTC+03:00">
11:10
       </div>

       <div class="text">
а отрицательные целые числа в памяти столько же занимают, сколько и положительные?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22842">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 11:32:47 UTC+03:00">
11:32
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22843">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:34:31 UTC+03:00">
12:34
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Ещё несколько бенчмарков:<br><a href="https://tinyurl.com/yd7un9y8">https://tinyurl.com/yd7un9y8</a> - суммирование большой коллекции<br><a href="https://tinyurl.com/y9lsjfq5">https://tinyurl.com/y9lsjfq5</a> - дублирование большого массива<br><a href="https://tinyurl.com/y8f5vjev">https://tinyurl.com/y8f5vjev</a> - итерирование по большим объектам
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22844">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:43:28 UTC+03:00">
12:43
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну все равно, для чего это все? все же эти бенчамарки меряют не оптимизированные функции, все по холодной<br><br>цель то сделать хорошо для тех кто постоянно пользуется приложением, а не тех кто случайно забрел на страницу и уйдет через 10 секунд
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22845">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:44:14 UTC+03:00">
12:44
       </div>

       <div class="text">
если ты заходишь на страницу несколько раз, то хром закэшит горячие функции, и при повторном заходе у тебя сходу уже будет все горячее
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22846">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:45:03 UTC+03:00">
12:45
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Тут меряются оптимизированные.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22847">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:45:37 UTC+03:00">
12:45
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
у тебя же функции пересоздаются все время
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22848">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:46:22 UTC+03:00">
12:46
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Ну ты код глянь. Создаются, потом вызываются эн раз.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22849">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:49:22 UTC+03:00">
12:49
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а как измерять нагруженность гс?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22850">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:50:18 UTC+03:00">
12:50
       </div>

       <div class="text">
оверхед от него что б бенч тоже показывал косвенно
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22851">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:50:47 UTC+03:00">
12:50
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну я вижу каждый раз евалится этот код<br><pre>const arr0 = [ ...new Array(10000) ].fill( i =&gt; Math.random() );<br>const test0 = arr =&gt; {<br> var sum = 0;<br> for( const val of arr ) sum += val;<br> return sum;<br>}</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22852">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:52:40 UTC+03:00">
12:52
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Именно эвалится там всегда разный код.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22853">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:52:58 UTC+03:00">
12:52
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну да
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22854">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:53:07 UTC+03:00">
12:53
       </div>

       <div class="text">
в чем цель то мерить код после евала?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22855">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:53:13 UTC+03:00">
12:53
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
В каждом замере создаётся функция, потом она вызывается разное число раз.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22856">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:53:14 UTC+03:00">
12:53
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
он же дико медленный
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22857">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:54:18 UTC+03:00">
12:54
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Именно эвал и не участвует в замерах.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22858">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:54:34 UTC+03:00">
12:54
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так это понятно что не учавствует
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22859">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:55:04 UTC+03:00">
12:55
       </div>

       <div class="text">
просто результат который он выдаст в виде функции будет неоптмизированный, а ты его после первого прогона сразу же выкидываешь
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22860">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:55:36 UTC+03:00">
12:55
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Поэтому внутри той неоптимизированной функции создаётся другая функция, которая вызывается много раз и должна соптимизироваться.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22861">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:56:31 UTC+03:00">
12:56
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я не очень понимаю где в примере выше создается функция которая прогонится много много раз
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22862">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:57:14 UTC+03:00">
12:57
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Пример выше, это первый замер внешнего кода.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22863">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:57:37 UTC+03:00">
12:57
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
в каком месте у тебя мерится внутренняя функция?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22864">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:58:03 UTC+03:00">
12:58
       </div>

       <div class="text">
это мерит внешнюю?<br><pre>const start_run = performance.now()<br>      func()<br>      time_run = performance.now() - start_run</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22865">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:58:20 UTC+03:00">
12:58
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Этот просто мерит.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22866">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 12:58:43 UTC+03:00">
12:58
       </div>

       <div class="text">
<a href="https://github.com/eigenmethod/mol/blob/master/app/jsperf/jsperf.view.ts#L129">https://github.com/eigenmethod/mol/blob/master/app/jsperf/jsperf.view.ts#L129</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22867">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:00:01 UTC+03:00">
13:00
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
не понимаю, у тебя она вызывает measure
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22868">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:00:10 UTC+03:00">
13:00
       </div>

       <div class="text">
которая в итоге делает <br><pre>const source = outer.join( current )<br>      let func = new Function( &apos;&apos; , source )<br>      const time_make = performance.now() - start_make<br><br>      const start_run = performance.now()<br>      func()<br>      time_run = performance.now() - start_run</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22869">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:00:29 UTC+03:00">
13:00
       </div>

       <div class="text">
то что внутри func я уже скидывал
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22870">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:01:54 UTC+03:00">
13:01
       </div>

       <div class="text">
<pre>const arr = [ ...new Array(10000) ].fill( i =&gt; Math.random() );<br>const test = arr =&gt; {<br> var sum = 0;<br> arr.forEach( val =&gt; { sum += val } );<br> return sum;<br>}<br> test( arr );</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22871">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:01:56 UTC+03:00">
13:01
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Там два вызова measure с разными аргументами.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22872">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:02:17 UTC+03:00">
13:02
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22870" onclick="return GoToMessage(22870)">this message</a>
       </div>

       <div class="text">
Это первая итерация внутреннего замера.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22873">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:02:18 UTC+03:00">
13:02
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я что то не наблюдаю чтобы test вызывался много много раз
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22874">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:02:47 UTC+03:00">
13:02
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Простой же код..
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22875">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:03:28 UTC+03:00">
13:03
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
test запускается только 1 раз, мерится его выполнение, и убивается
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22876">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:04:06 UTC+03:00">
13:04
       </div>

       <div class="text">
где про то чтобы test мог прооптимизироваться?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22877">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:04:52 UTC+03:00">
13:04
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
В первой итерации. Всего их тут около 10.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22878">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:06:45 UTC+03:00">
13:06
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
не знаю, не увидел
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22879">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:06:52 UTC+03:00">
13:06
       </div>

       <div class="text">
покажи код который попадет в евал
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22880">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:10:37 UTC+03:00">
13:10
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
<pre>const arr = [ ...new Array(1000) ].fill( i =&gt; Math.random() );<br>const test = arr =&gt; {<br>  var sum = 0; var i = arr.length;<br>  while( i --&gt; 0 ) sum += arr[i];<br>  return sum;<br>}<br> test( arr );  test( arr );  test( arr );  test( arr );  test( arr );  test( arr );  test( arr );  test( arr );  test( arr );  test( arr );  test( arr );  test( arr );</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22881">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:11:21 UTC+03:00">
13:11
       </div>

       <div class="text">
Ты видимо брейкпоинт ставишь, что приводит к выходу замера за 100мс и завершению итераций после первой же.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22882">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:11:52 UTC+03:00">
13:11
       </div>

       <div class="text">
Попробуй такое условие брейкпоинта: <code>console.log(source),false</code>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22883">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:11:55 UTC+03:00">
13:11
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
наверное, а указать можно сколько раз прогнать функцию?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22884">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:12:22 UTC+03:00">
13:12
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Неа, автоматизация-с.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22885">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:12:46 UTC+03:00">
13:12
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
за 10 вызовов функция не оптимизируется
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22886">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:13:18 UTC+03:00">
13:13
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Ну там размеры массивов можно уменьшить - будет больше итераций.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22887">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:14:45 UTC+03:00">
13:14
       </div>

       <div class="text">
Собственно вот: <a href="https://tinyurl.com/ya4g7neh">https://tinyurl.com/ya4g7neh</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22888">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:15:34 UTC+03:00">
13:15
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а для чего outer/inner, это что такое?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22889">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:17:09 UTC+03:00">
13:17
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Для такого рода замеров: <a href="https://tinyurl.com/ybrykc8c">https://tinyurl.com/ybrykc8c</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22890">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:18:07 UTC+03:00">
13:18
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
и inner/outer графики не нормированны относительно друг друга?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22891">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:18:20 UTC+03:00">
13:18
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Нет, конечно.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22892">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:19:13 UTC+03:00">
13:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
так и не понял, что такое inner
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22893">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:21:04 UTC+03:00">
13:21
       </div>

       <div class="text">
outer - это setup код+ итерации или что?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22894">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:22:07 UTC+03:00">
13:22
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Внешний и внутренний код. Для внутреннего может требоваться определённое окружение, но замерять его нужно независимо от создания окружения.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22895">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:22:20 UTC+03:00">
13:22
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
это просто контрольная точка?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22896">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:22:47 UTC+03:00">
13:22
       </div>

       <div class="text">
console.time(&apos;some&apos;) bla-bla; console.timeEnd(&apos;some&apos;);
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22897">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:22:48 UTC+03:00">
13:22
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Что такое контрольная точка?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22898">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:23:07 UTC+03:00">
13:23
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
дополнительный замер участка кода?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22899">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:23:27 UTC+03:00">
13:23
       </div>

       <div class="text">
что б 2 инпута не делать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22900">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:23:44 UTC+03:00">
13:23
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Чтоб 3 инпута не делать.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22901">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:32:18 UTC+03:00">
13:32
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
схему какую-нить, как код выполняется
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22902">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:36:11 UTC+03:00">
13:36
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Это обычный шаблон. Всё, что в двойных фигурных - повторяется много раз.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22903">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:37:03 UTC+03:00">
13:37
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а outer выкидывает inner из измерений?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22904">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:38:04 UTC+03:00">
13:38
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Он без inner замеряется.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22905">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:39:04 UTC+03:00">
13:39
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а цветом не выделить прям в редакторе outer/inner и соответствующего цвета сделать надписи?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22906">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:41:23 UTC+03:00">
13:41
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
У меня пока нет компонента-радактора с подсветкой синтаксиса.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22907">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:42:17 UTC+03:00">
13:42
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
какую-нить подсказку влепить
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22908">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:42:41 UTC+03:00">
13:42
       </div>

       <div class="text">
в баре 100% - это что?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22909">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:45:16 UTC+03:00">
13:45
       </div>

       <div class="text">
а, понял, т.е. все бары все-таки нормированны по максимальному значению Hz среди всех
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22910">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:45:26 UTC+03:00">
13:45
       </div>

       <div class="text">
почему ты тогда сказал, что не нормированны
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22911">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:45:45 UTC+03:00">
13:45
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
outer с inner не нормированы. Трудности перевода.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22912">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:46:16 UTC+03:00">
13:46
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а, да
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22913">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:47:28 UTC+03:00">
13:47
       </div>

       <div class="text">
ты б как-то их разделил цветом все-таки, не понятно что это разные параметры и их нельзя сравнивать
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22914">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 13:48:23 UTC+03:00">
13:48
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Хорошая идея, запишу в продуктовый бэклог.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22915">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:20:54 UTC+03:00">
14:20
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а как вообще на основе inner/outer сделать вывод о том что быстрее будет в реальном коде?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22916">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:21:21 UTC+03:00">
14:21
       </div>

       <div class="text">
какое-то усредненное значение или веса ставить?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22917">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:25:49 UTC+03:00">
14:25
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Это просто разные коды. outer обычно это всякие инициализации, влияющие на скорость запуска приложения. А inner - то, что исполняется обычно во время работы.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22918">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:37:29 UTC+03:00">
14:37
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
так все-таки как?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22919">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:37:41 UTC+03:00">
14:37
       </div>

       <div class="text">
для чего-то ты outer оставил
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22920">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic6" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">

        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:45:10 UTC+03:00">
14:45
       </div>

       <div class="from_name">
Deleted Account
       </div>

       <div class="text">
Кстати. То как работают у вас файберы в реакте называют &quot;алгебраическими эффектами&quot; <a href="https://www.youtube.com/watch?v=7GcrT0SBSnI&amp;t=1085s">https://www.youtube.com/watch?v=7GcrT0SBSnI&amp;t=1085s</a><br><br>Вопрос, можно ли небольшую документацию как бы использовать $mol_fiber обособленно от остального фреймворка. Вообще почему не бьёте все на пакеты?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22921">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:46:30 UTC+03:00">
14:46
       </div>

       <div class="text">
А, это и есть отдельная библиотека mol_fiber 🤔<br>Ладно, спасибо...<br>Странно что тут <a href="https://github.com/eigenmethod/mol/blob/master/fiber/readme.md">https://github.com/eigenmethod/mol/blob/master/fiber/readme.md</a> (в папке) нет package.json
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22922">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:48:03 UTC+03:00">
14:48
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
добро пожаловать в мир стандартов димы
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22923">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:48:24 UTC+03:00">
14:48
       </div>

       <div class="text">
и файберы это все же не эффекты
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22924">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:48:55 UTC+03:00">
14:48
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22921" onclick="return GoToMessage(22921)">this message</a>
       </div>

       <div class="text">
По задумке он при сборке должен генерится (<a href="http://mol.js.org/fiber/-/package.json">http://mol.js.org/fiber/-/package.json</a>)  но я это ещё не допилил, так что приходится руками подправлять версии.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22925">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:49:10 UTC+03:00">
14:49
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22918" onclick="return GoToMessage(22918)">this message</a>
       </div>

       <div class="text">
Честно говоря я не понимаю в чём сложность.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22926">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic6" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">

        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 14:49:32 UTC+03:00">
14:49
       </div>

       <div class="from_name">
Deleted Account
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22923" onclick="return GoToMessage(22923)">this message</a>
       </div>

       <div class="text">
А в чем разница?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22927">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 15:42:40 UTC+03:00">
15:42
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
<a href="https://t.me/cevek">@cevek</a> видосы с прошлой холи опубликовали: <a href="https://www.youtube.com/playlist?list=PL8sJahqnzh8KeXLLPIasdrnqMy-JkTGVM">https://www.youtube.com/playlist?list=PL8sJahqnzh8KeXLLPIasdrnqMy-JkTGVM</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22928">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 16:52:35 UTC+03:00">
16:52
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22926" onclick="return GoToMessage(22926)">this message</a>
       </div>

       <div class="text">
вообще похоже, только эффекты выглядят более низкоуровневыми<br>эффект, это вот, с try / catch, continuation - <a href="https://esdiscuss.org/topic/one-shot-delimited-continuations-with-effect-handlers">https://esdiscuss.org/topic/one-shot-delimited-continuations-with-effect-handlers</a><br>а файбер на его основе построить наверное можно<br>Файбер, скорее всего это из D дима взял, <a href="https://gist.github.com/nin-jin/5408ef8f16f43f1b4fe9cbcea577aac6">https://gist.github.com/nin-jin/5408ef8f16f43f1b4fe9cbcea577aac6</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22929">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 16:54:29 UTC+03:00">
16:54
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22925" onclick="return GoToMessage(22925)">this message</a>
       </div>

       <div class="text">
просто как outer поможет оценить скорость? в приложении то нет обычно outer/inner, есть кусок кода, который надо померять
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22930">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:01:04 UTC+03:00">
17:01
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22928" onclick="return GoToMessage(22928)">this message</a>
       </div>

       <div class="text">
<a href="https://en.wikipedia.org/wiki/Fiber_(computer_science)">https://en.wikipedia.org/wiki/Fiber_(computer_science)</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22931">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:02:29 UTC+03:00">
17:02
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22929" onclick="return GoToMessage(22929)">this message</a>
       </div>

       <div class="text">
Всегда есть инициализация приложения, а есть его работа.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22932">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:04:43 UTC+03:00">
17:04
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
обычно связано, атомы создаются и грохаются, запускаются новые участки кода
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22933">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:05:50 UTC+03:00">
17:05
       </div>

       <div class="text">
что такое инциализация приложения? это не просто время от ввода урла до отрисовки морды
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22934">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:07:18 UTC+03:00">
17:07
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Обычно это создание классов, функций и тп.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22935">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:07:58 UTC+03:00">
17:07
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22930" onclick="return GoToMessage(22930)">this message</a>
       </div>

       <div class="text">
задачи, которые решают похожи - и там и там прерывания и продолжения
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22936">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:08:34 UTC+03:00">
17:08
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Ну да, идиома одна и та же.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22937">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:11:49 UTC+03:00">
17:11
       </div>

       <div class="text">
<a href="https://draftjs.org/">https://draftjs.org/</a> - чудеса адаптивности: если экран маленький, то просто не даём попробовать редактор в деле.<br>Вставил в него 200кб текста. Фокусируем - 200мс вычислений. Вводим символ - 100мс вычислений. Расфокусируем - 70мс вычислений.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22938">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:13:12 UTC+03:00">
17:13
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
есть вроде более быстрые альтернативы
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22939">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:15:15 UTC+03:00">
17:15
       </div>

       <div class="text">
<a href="https://github.com/ianstormtaylor/slate">https://github.com/ianstormtaylor/slate</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22940">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:16:07 UTC+03:00">
17:16
       </div>

       <div class="text">
правда тормоза тоже есть на больших текстах
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22941">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic6" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">

        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:17:36 UTC+03:00">
17:17
       </div>

       <div class="from_name">
Deleted Account
       </div>

       <div class="text">
<a href="https://github.com/basecamp/trix">https://github.com/basecamp/trix</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22942">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:20:17 UTC+03:00">
17:20
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22939" onclick="return GoToMessage(22939)">this message</a>
       </div>

       <div class="text">
Если б ещё сайт у них не лежал. А так даже не погонять.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22943">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:23:10 UTC+03:00">
17:23
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22941" onclick="return GoToMessage(22941)">this message</a>
       </div>

       <div class="text">
Тоже 100мс на ввод каждого символа.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22944">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:24:28 UTC+03:00">
17:24
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ты что то не то смотришь
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22945">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:24:30 UTC+03:00">
17:24
       </div>

       <div class="media_wrap clearfix">

        <div class="media clearfix pull_left media_photo">

         <div class="fill pull_left">

         </div>

         <div class="body">

          <div class="title bold">
Photo
          </div>

          <div class="description">
Not included, change data exporting settings to download.
          </div>

          <div class="status details">
533×826, 63.2 KB
          </div>

         </div>

        </div>

       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22946">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:24:58 UTC+03:00">
17:24
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22942" onclick="return GoToMessage(22942)">this message</a>
       </div>

       <div class="text">
сайт открывается норм, что-то у тебя
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22947">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:25:21 UTC+03:00">
17:25
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22945" onclick="return GoToMessage(22945)">this message</a>
       </div>

       <div class="text">
На 200кб текста?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22948">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:27:23 UTC+03:00">
17:27
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22946" onclick="return GoToMessage(22946)">this message</a>
       </div>

       <div class="text">
Ожил, да. Тот же тест... не смог вставить в него 200кб текста, не дождался :`(
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22949">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:27:55 UTC+03:00">
17:27
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да, 200кб тормозит
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22950">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:28:07 UTC+03:00">
17:28
       </div>

       <div class="text">
но это такая гора текста получается
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22951">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:28:12 UTC+03:00">
17:28
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а есть хоть один веб-редактор, где можно 200кб вменяемо редактировать?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22952">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:28:17 UTC+03:00">
17:28
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Гуглдок за 60мс управляется.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22953">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:28:32 UTC+03:00">
17:28
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
с картинками?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22954">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:29:02 UTC+03:00">
17:29
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22951" onclick="return GoToMessage(22951)">this message</a>
       </div>

       <div class="text">
Будет 😊 У меня сейчас 5мс на каждый символ. И всё это время - полный ререндер экрана.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22955">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:29:12 UTC+03:00">
17:29
       </div>

       <div class="text">
Не, чисто текст.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22956">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:30:46 UTC+03:00">
17:30
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ребята из xray браузер форкают и делают свой инпут, а ты вот так прям в браузере?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22957">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:32:01 UTC+03:00">
17:32
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Современный фронтенд - чтобы изменить один единственный дом-узел требуется 100мс вычислений.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22958">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:32:36 UTC+03:00">
17:32
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22956" onclick="return GoToMessage(22956)">this message</a>
       </div>

       <div class="text">
Где почитать про них?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22960">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:33:40 UTC+03:00">
17:33
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
я ж кидал, <a href="https://github.com/atom/xray">https://github.com/atom/xray</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22961">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:34:17 UTC+03:00">
17:34
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
А, ну атом-то тот ещё тормоз, да.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22962">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:34:21 UTC+03:00">
17:34
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
в vscode, насколько я знаю, тоже свой инпут
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22963">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:35:12 UTC+03:00">
17:35
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
<a href="https://www.slatejs.org/#/huge-document">https://www.slatejs.org/#/huge-document</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22964">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:35:16 UTC+03:00">
17:35
       </div>

       <div class="text">
50мс
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22965">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:35:23 UTC+03:00">
17:35
       </div>

       <div class="text">
160кб
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22966">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:35:44 UTC+03:00">
17:35
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22962" onclick="return GoToMessage(22962)">this message</a>
       </div>

       <div class="text">
Запиленный на JS же.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22967">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:36:49 UTC+03:00">
17:36
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22962" onclick="return GoToMessage(22962)">this message</a>
       </div>

       <div class="text">
да вроде обычные спаны дивы в редакторе
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22968">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:36:59 UTC+03:00">
17:36
       </div>

       <div class="text">
подсвечивают символы
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22969">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:39:17 UTC+03:00">
17:39
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22960" onclick="return GoToMessage(22960)">this message</a>
       </div>

       <div class="text">
так они же на  webgl, так не честно) на webgl можно даже тонны текста заливать, вот кстати пример <a href="https://www.youtube.com/watch?v=4vtKRE9an_I">https://www.youtube.com/watch?v=4vtKRE9an_I</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22970">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:39:58 UTC+03:00">
17:39
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22964" onclick="return GoToMessage(22964)">this message</a>
       </div>

       <div class="text">
На моей машине 70. С 200кб будет те же 100мс.
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22971">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 17:51:23 UTC+03:00">
17:51
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22969" onclick="return GoToMessage(22969)">this message</a>
       </div>

       <div class="text">
5 лет назад забросили проект, странно. Пробовал его?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22972">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 18:14:10 UTC+03:00">
18:14
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Падает, скорее всего не умеет инструментировать современный JS.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22973">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic1" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Б
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 18:56:54 UTC+03:00">
18:56
       </div>

       <div class="from_name">
Богдан 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22971" onclick="return GoToMessage(22971)">this message</a>
       </div>

       <div class="text">
не пробовал, но само видео мне показалось крутым) это тот же чувак который запилил <a href="https://github.com/makepad/makepad.github.io">https://github.com/makepad/makepad.github.io</a> где тоже текст рендерится через webgl
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22974">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 18:57:26 UTC+03:00">
18:57
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
что он щас делает, интересно, почему забросил все эти эксперименты
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22975">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 22:53:26 UTC+03:00">
22:53
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
как проверить, имеет ли смысл при вычислении каждого атома выделять память под новый массив или использовать один общий и запоминать позицию в нем?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22976">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 22:58:43 UTC+03:00">
22:58
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Один общий боюсь будет неограниченно расти.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22977">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 22:59:30 UTC+03:00">
22:59
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
это ж временный кэш на время вычислений
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22978">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 22:59:57 UTC+03:00">
22:59
       </div>

       <div class="text">
пока вычисляется хоть один файбер - массив растет, как только вычислилось - обнулился
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22979">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 23:01:05 UTC+03:00">
23:01
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
Если сплайсов не будет - вполне вариант.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22980">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 23:01:24 UTC+03:00">
23:01
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
правда может ли сложиться такая ситуация, что никогда не прекратятся вычисления?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22981">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic8" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
Д
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 23:02:06 UTC+03:00">
23:02
       </div>

       <div class="from_name">
Дим 
       </div>

       <div class="text">
У меня есть мысль сделать корневой файбер вечным. Хз, стоит ли.
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22982">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 23:08:08 UTC+03:00">
23:08
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message22980" onclick="return GoToMessage(22980)">this message</a>
       </div>

       <div class="text">
уйдет в нирвану
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22983">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 23:10:23 UTC+03:00">
23:10
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
поллинг данных обычный
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22984">

      <div class="body">

       <div class="pull_right date details" title="29.10.2018 23:14:26 UTC+03:00">
23:14
       </div>

       <div class="text">
два файбера, постоянно запускающихся конкурентно, никогда не разблокируют память и массив будет все время расти
       </div>

      </div>

     </div>

     <div class="message service" id="message-414">

      <div class="body details">
30 October 2018
      </div>

     </div>

     <div class="message default clearfix" id="message22985">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 13:52:57 UTC+03:00">
13:52
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а иначе надо что-то вроде сборки мусора делать, т.е. массив будет с дырами и их как-то надо переиспользовать, проблема тут в поиске свободного куска
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22986">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:09:18 UTC+03:00">
15:09
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
нужно ли держать в памяти факт обращения к мастерам из слейва между перезапусками слейва?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22987">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:09:48 UTC+03:00">
15:09
       </div>

       <div class="text">
если бы не нужно было, то все упрощается
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22988">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:10:16 UTC+03:00">
15:10
       </div>

       <div class="text">
но без этого закэшированные мастера будут отписываться
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22989">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:11:40 UTC+03:00">
15:11
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а как ты собираешься выпиливать тех кого не запросили?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22990">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:14:32 UTC+03:00">
15:14
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
я перед запуском calc obsolete-слейва создаю массив статусов для всех текущих мастеров,<br>пока слейв в compute, этот массив живет и мастера в него ставят 1 по факту обращения, те, которые ничего не поставили - после всех перезапусков выпиливаются
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22991">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:15:27 UTC+03:00">
15:15
       </div>

       <div class="text">
в compute слейв все время, пока мастера бросают promise-ексепшены
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22992">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:16:58 UTC+03:00">
15:16
       </div>

       <div class="text">
выпиливание происходит тут - <a href="https://gist.github.com/zerkalica/4eb44b0867b9c3fbb008501782d37d22#file-cell-ts-L210">https://gist.github.com/zerkalica/4eb44b0867b9c3fbb008501782d37d22#file-cell-ts-L210</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22993">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:19:12 UTC+03:00">
15:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а позицию куда записать в массив ты пишешь в сам мастер?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22994">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:19:49 UTC+03:00">
15:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
да, и обновляю ее перед каждым calc в слейве
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22995">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:20:23 UTC+03:00">
15:20
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а на место его возвращаешь? после калка?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22996">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:21:00 UTC+03:00">
15:21
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
не, не нужно, мастер пишет прям в массив статусов по индексу, который у него есть на момент запуска
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22997">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:21:59 UTC+03:00">
15:21
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну так если если слейв нижнего уровня захочет тот же мастер индекс ведь будет уже не тот
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message22998">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:22:38 UTC+03:00">
15:22
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
слейв нижнего уровня, выделит свой под-массив статусов, просетит индекс мастерам и выполнит calc
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message22999">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:23:41 UTC+03:00">
15:23
       </div>

       <div class="text">
массив статусов общий для всех, я только индекс перед каждым calc ставлю
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23000">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:24:17 UTC+03:00">
15:24
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
это понятно, но после отработки верхнего слейва который тоже просетит мастер, то при его вызове нижним индекс будет от верхнего
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23001">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:26:00 UTC+03:00">
15:26
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а, может, да, если такая картина:<br>s1 вызовет s2 и m1<br>s2 вызовет m1
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23002">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:26:24 UTC+03:00">
15:26
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
это я тогда еще картинку скидывал
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23003">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:26:29 UTC+03:00">
15:26
       </div>

       <div class="text">
граф
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23004">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:27:14 UTC+03:00">
15:27
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
можно в finally восстанавливать конечно индексы каждый раз, блин затратно как-то получается
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23005">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 15:33:00 UTC+03:00">
15:33
       </div>

       <div class="text">
но суть та же, все-равно будет массив статусов, если не выделять память под него каждый раз, задумываться о его переиспользовании, то получается фрагментированный массив с поиском свободных областей под статусы мастеров
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23006">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:08:02 UTC+03:00">
16:08
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так зачем это все?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23007">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:08:15 UTC+03:00">
16:08
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ты о чем?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23008">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:08:21 UTC+03:00">
16:08
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
мы уже обсуждали это все
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23009">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:08:34 UTC+03:00">
16:08
       </div>

       <div class="text">
зачем поиски свободных областей?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23010">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:09:12 UTC+03:00">
16:09
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
мы не обсуждали как хранить статусы
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23011">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:10:18 UTC+03:00">
16:10
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
у нас есть пул, из него перед вычислением слейва достаем массив<br>заполняем его предыдущими его статусами мастеров, мастерам задаем id нашей текущей транзакции, а потом все статусы возвращаем на место и отдаем массив обратно в пул
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23012">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:11:27 UTC+03:00">
16:11
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
вот нельзя так делать: try { calc() } finally { вернуть }
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23013">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:11:43 UTC+03:00">
16:11
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
почему?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23014">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:12:04 UTC+03:00">
16:12
       </div>

       <div class="text">
тебе в любом случае надо всегда вернуть
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23015">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:12:20 UTC+03:00">
16:12
       </div>

       <div class="text">
но ты можешь не отписывать мастеров в случае ошибки
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23016">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:12:40 UTC+03:00">
16:12
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
есть throw promise еще
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23017">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:12:48 UTC+03:00">
16:12
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
суть не меняет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23018">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:13:09 UTC+03:00">
16:13
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
надо накапливать информацию между перезапусками, а если возвращать - пулл просто новый вернет на следующем перезапуске
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23019">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:13:31 UTC+03:00">
16:13
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
для чего накапливать инфу?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23020">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:14:08 UTC+03:00">
16:14
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
что б  не отписались мастера, т.к. перезапуск - не означает что мастер перестал использоватья, а означает, что он закэшировался
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23021">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:14:35 UTC+03:00">
16:14
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а как ты узнаешь закэшировался он или просто его не стало?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23022">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:15:12 UTC+03:00">
16:15
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
если его не стало, то в течении всех перезапусков его не будет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23023">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:15:26 UTC+03:00">
16:15
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
как ты это можешь гарантировать?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23024">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:15:34 UTC+03:00">
16:15
       </div>

       <div class="text">
он может то появиться то исчезнуть
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23025">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:15:46 UTC+03:00">
16:15
       </div>

       <div class="text">
if (Math.random() &gt; .5) master();
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23026">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:16:16 UTC+03:00">
16:16
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
не идемпотентно
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23027">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:16:27 UTC+03:00">
16:16
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
мы говорим про атомы
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23028">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:16:35 UTC+03:00">
16:16
       </div>

       <div class="text">
атомы не должны быть чистыми
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23029">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:17:16 UTC+03:00">
16:17
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
под кэш надо класть рэндом
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23030">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:17:25 UTC+03:00">
16:17
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
зачем?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23031">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:17:42 UTC+03:00">
16:17
       </div>

       <div class="text">
в чем смысл кэшить рандом?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23032">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:18:36 UTC+03:00">
16:18
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а перевычисления не должны происходить при перезапусках, т.к. перезапуски - это механизм прерывания и восстановления выполнения
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23033">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:19:08 UTC+03:00">
16:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну короче вы ребята придумали какую то несуществующую проблему, а теперь героически пытаетесь решить
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23034">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:19:11 UTC+03:00">
16:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
тот же фетч, я уже говорил
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23035">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:19:38 UTC+03:00">
16:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я пример приводил когда пишется обвязка в 10 строк
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23036">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:19:46 UTC+03:00">
16:19
       </div>

       <div class="text">
и работает с атомами
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23037">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:19:54 UTC+03:00">
16:19
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
оборачивать фетч в атом неправильно, может быть вообще либа совместимая только с саспенсом реактовым
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23038">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:20:10 UTC+03:00">
16:20
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а оборачивать в файбер правильно?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23039">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:20:22 UTC+03:00">
16:20
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
а в файбер не обязательно, любой кэш может быть
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23040">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:20:44 UTC+03:00">
16:20
       </div>

       <div class="text">
конечно оборачивать в любой кэш лучше, чем оборачивать в файбер/атом/мобх
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23041">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:21:14 UTC+03:00">
16:21
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так все равно нет проблемы, либа которая с саспенсом просто где то поймает этот промис и перезапустит слейв
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23042">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:22:52 UTC+03:00">
16:22
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
мастер отпишется, либа может принимать мастер, не зная, что он реактивный, что-то там сделает и закэширует, но мастер уже перестанет влиять на слейв
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23043">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:24:12 UTC+03:00">
16:24
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так мастер реактивный или нет?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23044">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:24:23 UTC+03:00">
16:24
       </div>

       <div class="text">
если не реактивный то и не мастер значит
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23045">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:24:27 UTC+03:00">
16:24
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
по-хорошему кэш должен быть временный, пока вычисления происходят, файбер как раз так делает, но может быть и любой другой
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23046">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:24:42 UTC+03:00">
16:24
       </div>

       <div class="text">
мастер реактивный
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23047">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:24:52 UTC+03:00">
16:24
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну значит все таки мастер, который атом
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23048">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:25:00 UTC+03:00">
16:25
       </div>

       <div class="text">
который может отдавать из кэша
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23049">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:25:13 UTC+03:00">
16:25
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
мастер, атом, но за кэшем, реализация которого может быть разная
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23050">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:25:31 UTC+03:00">
16:25
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну значит это проблема кэша?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23051">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:25:47 UTC+03:00">
16:25
       </div>

       <div class="text">
я реально не понимаю зачем кэшить кэш?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23052">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:26:23 UTC+03:00">
16:26
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
чем меньше кэшей, тем лучше, а зачем держать в памяти, то что уже закэшировалось выше
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23053">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:26:54 UTC+03:00">
16:26
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
я реально не понимаю, в атоме уже кэш, зачем поверх него еще один кэш, который ломает всю работу атомов?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23054">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:26:54 UTC+03:00">
16:26
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
он и легче атома будет гораздо
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23055">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:27:32 UTC+03:00">
16:27
       </div>

       <div class="text">
не поверх, это другой тип кэша, который только между throw promise кэширует, он проще атомов, там нет слейвов
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23056">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:28:00 UTC+03:00">
16:28
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
так а для чего это все? какую проблему решает то?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23057">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:28:11 UTC+03:00">
16:28
       </div>

       <div class="text">
для ускорения работы атомов?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23058">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:29:09 UTC+03:00">
16:29
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
меньше ресурсов, для fetch не надо атом городить, а достаточно легкий кэш, хоть файбер, хоть вообще на свойствах
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23059">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:30:04 UTC+03:00">
16:30
       </div>

       <div class="text">
может же быть куча фетчей, а результат - комбинация их результатов
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23060">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:30:37 UTC+03:00">
16:30
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ок, вот вариант без атома<br>function getData(promise) { var value; return () =&gt; { if (!value) { promise.then(data =&gt; value = data); throw promise; } return value }}
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23061">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:30:43 UTC+03:00">
16:30
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
если каждый обернуть в атом - будут висеть все-время в памяти slave/master на каждый
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23062">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:31:39 UTC+03:00">
16:31
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
просто этот промис уже должен словить кто нибудь в самом низу, который перезапустит get своего атома
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23063">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:35:02 UTC+03:00">
16:35
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
fetch - это кэш обертка над промисом<br>fetch(&apos;<a href="" onclick="return ShowBotCommand(&quot;1&quot;)">/1</a>&apos;, {body: { some: fetch(&apos;/2/&apos; + atom.get()).json() }})
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23064">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:35:20 UTC+03:00">
16:35
       </div>

       <div class="text">
тут вопрос, может ли внутрь fetch проникнуть нераспакованный атом
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23065">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:36:20 UTC+03:00">
16:36
       </div>

       <div class="text">
в моем примере не может, но что-то подсказывает, что могут быть кейсы
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23066">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:36:51 UTC+03:00">
16:36
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
не очень понял твой пример
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23067">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:36:57 UTC+03:00">
16:36
       </div>

       <div class="text">
кэш куда пишется?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23068">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:37:14 UTC+03:00">
16:37
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
мапка по урлу считай
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23069">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:37:54 UTC+03:00">
16:37
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а что ты имеешь ввиду под проникнуть внутрь?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23070">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:38:13 UTC+03:00">
16:38
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
за кэш
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23071">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:38:20 UTC+03:00">
16:38
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
это как?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23072">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:42:39 UTC+03:00">
16:42
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
var param = {get some() { return atom.get() } }<br>cachedFetch(&apos;<a href="" onclick="return ShowBotCommand(&quot;1&quot;)">/1</a>&apos;, {body: param})
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23073">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:43:25 UTC+03:00">
16:43
       </div>

       <div class="text">
т.е. передаем параметр в котором лениво вычисляется атом в момент передачи настоящему фетчу
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23074">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:43:36 UTC+03:00">
16:43
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
дальше?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23075">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:44:32 UTC+03:00">
16:44
       </div>

       <div class="text">
атом в котором это все дело происходит подпишется на этот atom.get() когда cachedFetch дернет body
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23076">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:44:33 UTC+03:00">
16:44
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
var cachedFetch = (url, args) =&gt; map.get(url) || fetch(url, args).then(data =&gt; {<br>map.set(url, data)<br>})
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23077">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:45:39 UTC+03:00">
16:45
       </div>

       <div class="text">
args мы распаковываем после кэша: map.get(url)
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23078">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:46:27 UTC+03:00">
16:46
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну в смысле когда кэша еще нет
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23079">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:46:59 UTC+03:00">
16:46
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ну да, а когда он есть, до распаковки дело не доходит, атом отписывается
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23080">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:47:06 UTC+03:00">
16:47
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
да все верно
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23081">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:47:19 UTC+03:00">
16:47
       </div>

       <div class="text">
где проблема?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23082">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:47:47 UTC+03:00">
16:47
       </div>

       <div class="text">
если мы отписываемся от него значит он нам уже не нужен
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23083">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:47:48 UTC+03:00">
16:47
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
в отписывании из-за временного кэша
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23084">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:48:21 UTC+03:00">
16:48
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
а если хочешь сбрасывать кэш, значит надо добавить реактивности к мапке
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23085">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:48:41 UTC+03:00">
16:48
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
map -это примитивно, если правильно делать, то как в файберах - грохать кэши, когда все фетчи в родительском атоме выполнятся
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23086">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:48:59 UTC+03:00">
16:48
       </div>

       <div class="text">
а зачем, если можно просто статусы между перезапусками помнить
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23087">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:49:18 UTC+03:00">
16:49
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
не понял по поводу примитивности
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23088">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:49:50 UTC+03:00">
16:49
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ну map живет постоянно, а надо что б он жил, пока родительский атом вычисляется
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23089">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:50:14 UTC+03:00">
16:50
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
делай викмап от родительского
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23090">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:51:05 UTC+03:00">
16:51
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
<pre>var cachedFetch = (url, args) =&gt; {<br>  var map = CurrentAtom.fetchMap<br>  return map.get(url) || throw fetch(url, args).then(data =&gt; map.set(url, data) )</pre>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23091">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:51:16 UTC+03:00">
16:51
       </div>

       <div class="text">
вот так сейчас
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23092">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:51:30 UTC+03:00">
16:51
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну вот, какие проблемы то?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23093">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:51:59 UTC+03:00">
16:51
       </div>

       <div class="text">
просто не очень понимаю когда это может пригодится, кэшить только на время вычисления
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23094">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:52:16 UTC+03:00">
16:52
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
если в args есть ленивый атом, то при перезапуске, когда кэш заполнен, мы отпишемся от этого атома
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23095">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:52:29 UTC+03:00">
16:52
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну да
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23096">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:52:44 UTC+03:00">
16:52
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
нелогично ж
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23097">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:52:54 UTC+03:00">
16:52
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
почему?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23098">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:53:17 UTC+03:00">
16:53
       </div>

       <div class="text">
по моему все логично, он нам больше не нужен, поэтому отписываемя
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23099">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:53:24 UTC+03:00">
16:53
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
в args есть реактивный параметр потому что
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23100">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:53:41 UTC+03:00">
16:53
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну аргс то мы уже больше запускать не сможем
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23101">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:54:25 UTC+03:00">
16:54
       </div>

       <div class="text">
в аргс реактивный аргумент ведь уже не сможет ни на что повлиять
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23102">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:54:39 UTC+03:00">
16:54
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
получается кэш вычислений непрозрачно работает для реактивности
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23103">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:54:41 UTC+03:00">
16:54
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну перезапуст он наш текущий атом и чего
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23104">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:55:03 UTC+03:00">
16:55
       </div>

       <div class="text">
опять не понимаю, почему непрозрачно?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23105">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:55:53 UTC+03:00">
16:55
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
мастер нам нужен - это может быть какой-то аргумент, при изменении которого надо перевытянуть слейв и заново сфетчить
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23106">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:58:10 UTC+03:00">
16:58
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну так, в твоем текущем коде, ведь ничего не поменяется если даже он перезапустит атом, мы ведь до реального фетча никак не доберемся из за кэша
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23107">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:58:49 UTC+03:00">
16:58
       </div>

       <div class="text">
по моему супер логично
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23108">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 16:59:30 UTC+03:00">
16:59
       </div>

       <div class="text">
хочешь перезапуска фетча, очистки кэш
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23109">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:01:20 UTC+03:00">
17:01
       </div>

       <div class="text">
у тебя же кэш от урла, соответственно в урл этот должен быть тогда включен этот аргумент, верно, а значит этот важный мастер будет дергаться каждый раз и никогда не будет отписываться
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23110">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:05:53 UTC+03:00">
17:05
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
в коде с var map = CurrentAtom.fetchMap доберется, т.к. атом чистит свой fetchMap по завершении всех фетчей
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23111">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:06:49 UTC+03:00">
17:06
       </div>

       <div class="text">
что б заново сфетчить, достаточно кэш атома сбросить прямо или косвенно через мастер
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23112">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:07:53 UTC+03:00">
17:07
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну вообщем проблемы я не вижу
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23113">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:10:18 UTC+03:00">
17:10
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
аргумент не только в урл может быть, еще в body
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23114">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:11:05 UTC+03:00">
17:11
       </div>

       <div class="text">
как альтернатива да, зарубиться всегда атомы распаковывать перед кэшем, но гарантировать этого не получится
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23115">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:19:21 UTC+03:00">
17:19
       </div>

       <div class="text">
<a href="https://t.me/nin_jin">@nin_jin</a>, дим, как ты считаешь, надо запоминать использование мастеров между перезапусками?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23116">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:19:28 UTC+03:00">
17:19
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="reply_to details">
In reply to <a href="#go_to_message23113" onclick="return GoToMessage(23113)">this message</a>
       </div>

       <div class="text">
ну мы не можем кэшировать только урлы, значит и боди еще надо добавлять к ключу кэша
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23117">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:20:20 UTC+03:00">
17:20
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
да, если кэшить по ключу, но можно кэшить по позиции вызова в функции или по номеру строки в файле через ts-плагин
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23118">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:20:43 UTC+03:00">
17:20
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
для чего?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23119">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:21:04 UTC+03:00">
17:21
       </div>

       <div class="text">
у тебя же аргументы могут быть разные, в переменных
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23120">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:21:07 UTC+03:00">
17:21
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
что б кэш был универсальный без привязки к урлу и другим параметрам
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23121">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:21:32 UTC+03:00">
17:21
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
fetch(‘/product/’ + id)
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23122">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:22:17 UTC+03:00">
17:22
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
вместо фетча может быть что угодно с любыми параметрами
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23123">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:22:27 UTC+03:00">
17:22
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
и?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23124">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:23:05 UTC+03:00">
17:23
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
ключ откуда взять, генерить его на конкретный юзкейс?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23125">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:24:03 UTC+03:00">
17:24
       </div>

       <div class="text">
если код идемпотентный, то ключ - это просто порядковый номер вызова фукнции
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23126">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:24:18 UTC+03:00">
17:24
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ну это уже тема другого разговора
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23127">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:24:31 UTC+03:00">
17:24
       </div>

       <div class="text">
видали новый реакт?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23128">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:24:39 UTC+03:00">
17:24
       </div>

       <div class="text">
с индеподентностью
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23129">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:24:57 UTC+03:00">
17:24
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
не, че там
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23130">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:25:15 UTC+03:00">
17:25
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
<a href="https://reactjs.org/blog/2018/10/23/react-v-16-6.html">https://reactjs.org/blog/2018/10/23/react-v-16-6.html</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23131">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:25:34 UTC+03:00">
17:25
       </div>

       <div class="text">
<a href="https://reactjs.org/docs/hooks-intro.html">https://reactjs.org/docs/hooks-intro.html</a>
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23132">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:26:05 UTC+03:00">
17:26
       </div>

       <div class="text">
хуки
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23133">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:26:12 UTC+03:00">
17:26
       </div>

       <div class="text">
и суспенс включили
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23134">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:27:52 UTC+03:00">
17:27
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
они по той же дороге из граблей теперь пойдут с этим саспенсом, с точно такими же проблемами
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23135">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic4" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
c
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:28:18 UTC+03:00">
17:28
       </div>

       <div class="from_name">
cevek 
       </div>

       <div class="text">
ты про девтулз?
       </div>

      </div>

     </div>

     <div class="message default clearfix" id="message23136">

      <div class="pull_left userpic_wrap">

       <div class="userpic userpic7" style="width: 42px; height: 42px">

        <div class="initials" style="line-height: 42px">
SY
        </div>

       </div>

      </div>

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:28:30 UTC+03:00">
17:28
       </div>

       <div class="from_name">
Sergey Yuferev
       </div>

       <div class="text">
про кэши
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23137">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:35:03 UTC+03:00">
17:35
       </div>

       <div class="text">
у них же была правильная мысль - skiplang, почему они продолжают накручивать этот реакт, могли хотя б стейт отделить в отдельные либы
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23138">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:36:03 UTC+03:00">
17:36
       </div>

       <div class="text">
про идемпотентность это ты имел в виду React.memo?
       </div>

      </div>

     </div>

     <div class="message default clearfix joined" id="message23139">

      <div class="body">

       <div class="pull_right date details" title="30.10.2018 17:40:02 UTC+03:00">
17:40
       </div>

       <div class="text">
интересно, как теперь мишель выкрутится, когда suspense уже зарелизили - <a href="https://github.com/mobxjs/mobx/issues/1646">https://github.com/mobxjs/mobx/issues/1646</a>
       </div>

      </div>

     </div>

     <a class="pagination block_link" href="messages24.html">
Next messages
     </a>

    </div>

   </div>

  </div>

 </body>

</html>
